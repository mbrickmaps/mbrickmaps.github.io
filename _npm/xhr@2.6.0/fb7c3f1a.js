/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/xhr@2.6.0/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import e from"../global@4.4.0/window.2a4f0ad7.js";import t from"../is-function@1.0.2/bcdbad2b.js";import r from"../parse-headers@2.0.5/23aa007f.js";import n from"../xtend@4.0.2/9320bd14.js";var o={exports:{}},s=e,a=t,u=r,i=n;function p(e,t,r){var n=e;return a(t)?(r=t,"string"==typeof e&&(n={uri:e})):n=i(t,{uri:e}),n.callback=r,n}function d(e,t,r){return c(t=p(e,t,r))}function c(e){if(void 0===e.callback)throw new Error("callback argument missing");var t=!1,r=function(r,n,o){t||(t=!0,e.callback(r,n,o))};function n(){var e=void 0;if(e=p.response?p.response:p.responseText||function(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}(p),w)try{e=JSON.parse(e)}catch(e){}return e}function o(e){return clearTimeout(c),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,r(e,R)}function s(){if(!i){var t;clearTimeout(c),t=e.useXDR&&void 0===p.status?200:1223===p.status?204:p.status;var o=R,s=null;return 0!==t?(o={body:n(),statusCode:t,method:l,headers:{},url:f,rawRequest:p},p.getAllResponseHeaders&&(o.headers=u(p.getAllResponseHeaders()))):s=new Error("Internal XMLHttpRequest Error"),r(s,o,o.body)}}var a,i,p=e.xhr||null;p||(p=e.cors||e.useXDR?new d.XDomainRequest:new d.XMLHttpRequest);var c,f=p.url=e.uri||e.url,l=p.method=e.method||"GET",m=e.body||e.data,h=p.headers=e.headers||{},y=!!e.sync,w=!1,R={body:void 0,headers:{},statusCode:0,method:l,url:f,rawRequest:p};if("json"in e&&!1!==e.json&&(w=!0,h.accept||h.Accept||(h.Accept="application/json"),"GET"!==l&&"HEAD"!==l&&(h["content-type"]||h["Content-Type"]||(h["Content-Type"]="application/json"),m=JSON.stringify(!0===e.json?m:e.json))),p.onreadystatechange=function(){4===p.readyState&&setTimeout(s,0)},p.onload=s,p.onerror=o,p.onprogress=function(){},p.onabort=function(){i=!0},p.ontimeout=o,p.open(l,f,!y,e.username,e.password),y||(p.withCredentials=!!e.withCredentials),!y&&e.timeout>0&&(c=setTimeout((function(){if(!i){i=!0,p.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",o(e)}}),e.timeout)),p.setRequestHeader)for(a in h)h.hasOwnProperty(a)&&p.setRequestHeader(a,h[a]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(p.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(p),p.send(m||null),p}o.exports=d,o.exports.default=d,d.XMLHttpRequest=s.XMLHttpRequest||function(){},d.XDomainRequest="withCredentials"in new d.XMLHttpRequest?d.XMLHttpRequest:s.XDomainRequest,function(e,t){for(var r=0;r<e.length;r++)t(e[r])}(["get","put","post","patch","head","delete"],(function(e){d["delete"===e?"del":e]=function(t,r,n){return(r=p(t,r,n)).method=e.toUpperCase(),c(r)}}));var f=o.exports;export{f as default};
