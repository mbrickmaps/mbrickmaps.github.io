/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.37.0.
 * Original file: /npm/@turf/bbox-clip@7.2.0/dist/esm/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{multiPolygon as t,polygon as n,lineString as r,multiLineString as e}from"../helpers@7.2.0/28807c9c.js";import{getGeom as o}from"../invariant@7.2.0/671cab78.js";function u(t,n){var r,e,o,u,h,f,p;for(e=1;e<=8;e*=2){for(r=[],u=!(i(o=t[t.length-1],n)&e),h=0;h<t.length;h++)(p=!(i(f=t[h],n)&e))!==u&&r.push(s(o,f,e,n)),p&&r.push(f),o=f,u=p;if(!(t=r).length)break}return r}function s(t,n,r,e){return 8&r?[t[0]+(n[0]-t[0])*(e[3]-t[1])/(n[1]-t[1]),e[3]]:4&r?[t[0]+(n[0]-t[0])*(e[1]-t[1])/(n[1]-t[1]),e[1]]:2&r?[e[2],t[1]+(n[1]-t[1])*(e[2]-t[0])/(n[0]-t[0])]:1&r?[e[0],t[1]+(n[1]-t[1])*(e[0]-t[0])/(n[0]-t[0])]:null}function i(t,n){var r=0;return t[0]<n[0]?r|=1:t[0]>n[2]&&(r|=2),t[1]<n[1]?r|=4:t[1]>n[3]&&(r|=8),r}function h(u,h){const p=o(u),l=p.type,a="Feature"===u.type?u.properties:{};let c=p.coordinates;switch(l){case"LineString":case"MultiLineString":{const t=[];return"LineString"===l&&(c=[c]),c.forEach((n=>{!function(t,n,r){var e,o,u,h=t.length,f=i(t[0],n),p=[];let l,a;for(r||(r=[]),e=1;e<h;e++){for(l=t[e-1],a=t[e],o=u=i(a,n);;){if(!(f|o)){p.push(l),o!==u?(p.push(a),e<h-1&&(r.push(p),p=[])):e===h-1&&p.push(a);break}if(f&o)break;f?(l=s(l,a,f,n),f=i(l,n)):(a=s(l,a,o,n),o=i(a,n))}f=u}p.length&&r.push(p)}(n,h,t)})),1===t.length?r(t[0],a):e(t,a)}case"Polygon":return n(f(c,h),a);case"MultiPolygon":return t(c.map((t=>f(t,h))),a);default:throw new Error("geometry "+l+" not supported")}}function f(t,n){const r=[];for(const e of t){const t=u(e,n);t.length>0&&(t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push(t[0]),t.length>=4&&r.push(t))}return r}var p=h;export{h as bboxClip,p as default};
