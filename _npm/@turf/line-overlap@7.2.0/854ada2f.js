/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.37.0.
 * Original file: /npm/@turf/line-overlap@7.2.0/dist/esm/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{geojsonRbush as e}from"../geojson-rbush@7.2.0/8d6139d6.js";import{lineSegment as r}from"../line-segment@7.2.0/b4b7acd8.js";import{nearestPointOnLine as t}from"../nearest-point-on-line@7.2.0/84873fda.js";import{booleanPointOnLine as o}from"../boolean-point-on-line@7.2.0/cd67869a.js";import{getCoords as i}from"../invariant@7.2.0/671cab78.js";import{segmentEach as n,featureEach as s}from"../meta@7.2.0/c0f2fe64.js";import{isObject as m,featureCollection as p}from"../helpers@7.2.0/28807c9c.js";import f from"../../fast-deep-equal@3.1.3/f66fa298.js";function u(u,l,h={}){if(!m(h=h||{}))throw new Error("options is invalid");var c=h.tolerance||0,d=[],v=e();const g=r(u);var b;v.load(g);let w=[];return n(l,(function(e){var r=!1;e&&(s(v.search(e),(function(n){if(!1===r){var s=i(e).sort(),m=i(n).sort();if(f(s,m))r=!0,b=b?a(b,e)||b:e;else if(0===c?o(s[0],n)&&o(s[1],n):t(n,s[0]).properties.dist<=c&&t(n,s[1]).properties.dist<=c)r=!0,b=b?a(b,e)||b:e;else if(0===c?o(m[0],e)&&o(m[1],e):t(e,m[0]).properties.dist<=c&&t(e,m[1]).properties.dist<=c)if(b){const e=a(b,n);e?b=e:w.push(n)}else b=n}})),!1===r&&b&&(d.push(b),w.length&&(d=d.concat(w),w=[]),b=void 0))})),b&&d.push(b),p(d)}function a(e,r){var t=i(r),o=i(e),n=o[0],s=o[o.length-1],m=e.geometry.coordinates;if(f(t[0],n))m.unshift(t[1]);else if(f(t[0],s))m.push(t[1]);else if(f(t[1],n))m.unshift(t[0]);else{if(!f(t[1],s))return;m.push(t[0])}return e}var l=u;export{l as default,u as lineOverlap};
