/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.37.0.
 * Original file: /npm/@turf/standard-deviational-ellipse@7.2.0/dist/esm/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{coordAll as t,featureEach as r}from"../meta@7.2.0/c0f2fe64.js";import{getCoords as e}from"../invariant@7.2.0/671cab78.js";import{isObject as o,isNumber as n,featureCollection as s}from"../helpers@7.2.0/28807c9c.js";import{centerMean as i}from"../center-mean@7.2.0/62da1405.js";import{pointsWithinPolygon as p}from"../points-within-polygon@7.2.0/885a2d62.js";import{ellipse as a}from"../ellipse@7.2.0/f065242d.js";function m(m,l){var u;if(!o(l=l||{}))throw new Error("options is invalid");const f=l.steps||64,M=l.weight,w=l.properties||{};if(!n(f))throw new Error("steps must be a number");if(!o(w))throw new Error("properties must be a number");const c=t(m).length,g=i(m,{weight:M});let v=0,d=0,x=0;r(m,(function(t){var r;const o=M&&(null==(r=t.properties)?void 0:r[M])||1,n=h(e(t),e(g));v+=Math.pow(n.x,2)*o,d+=Math.pow(n.y,2)*o,x+=n.x*n.y*o}));const y=v-d,b=Math.sqrt(Math.pow(y,2)+4*Math.pow(x,2)),E=2*x,q=Math.atan((y+b)/E),A=180*q/Math.PI;let C=0,j=0,D=0;r(m,(function(t){var r;const o=M&&(null==(r=t.properties)?void 0:r[M])||1,n=h(e(t),e(g));C+=Math.pow(n.x*Math.cos(q)-n.y*Math.sin(q),2)*o,j+=Math.pow(n.x*Math.sin(q)+n.y*Math.cos(q),2)*o,D+=o}));const F=Math.sqrt(2*C/D),I=Math.sqrt(2*j/D),O=a(g,F,I,{units:"degrees",angle:A,steps:f,properties:w}),P=p(m,s([O])),W={meanCenterCoordinates:e(g),semiMajorAxis:F,semiMinorAxis:I,numberOfFeatures:c,angle:A,percentageWithinEllipse:100*t(P).length/c};return O.properties=null!=(u=O.properties)?u:{},O.properties.standardDeviationalEllipse=W,O}function h(t,r){return{x:t[0]-r[0],y:t[1]-r[1]}}var l=m;export{l as default,m as standardDeviationalEllipse};
