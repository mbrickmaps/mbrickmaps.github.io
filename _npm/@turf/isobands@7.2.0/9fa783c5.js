/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.37.0.
 * Original file: /npm/@turf/isobands@7.2.0/dist/esm/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{bbox as r}from"../bbox@7.2.0/8d64fe90.js";import{area as t}from"../area@7.2.0/63969d19.js";import{booleanPointInPolygon as n}from"../boolean-point-in-polygon@7.2.0/080fdfef.js";import{explode as o}from"../explode@7.2.0/8f265ae0.js";import{collectionOf as e,getCoords as i}from"../invariant@7.2.0/671cab78.js";import{isObject as u,multiPolygon as p,featureCollection as s,polygon as a}from"../helpers@7.2.0/28807c9c.js";import{featureEach as f}from"../meta@7.2.0/c0f2fe64.js";import{isoBands as m}from"../../marchingsquares@1.3.3/8e7df0f4.js";var c=Object.defineProperty,l=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,d=(r,t,n)=>t in r?c(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n,b=(r,t)=>{for(var n in t||(t={}))g.call(t,n)&&d(r,n,t[n]);if(l)for(var n of l(t))h.call(t,n)&&d(r,n,t[n]);return r};function y(r,t){if(!u(t=t||{}))throw new Error("options is invalid");var n=t.zProperty||"elevation",o=t.flip,p=t.flags;e(r,"Point","input must contain Points");for(var s=function(r,t){var n={};f(r,(function(r){var t=i(r)[1];n[t]||(n[t]=[]),n[t].push(r)}));var o=Object.keys(n).map((function(r){return n[r].sort((function(r,t){return i(r)[0]-i(t)[0]}))})),e=o.sort((function(r,n){return t?i(r[0])[1]-i(n[0])[1]:i(n[0])[1]-i(r[0])[1]}));return e}(r,o),a=[],m=0;m<s.length;m++){for(var c=s[m],l=[],g=0;g<c.length;g++){var h=c[g];h.properties[n]?l.push(h.properties[n]):l.push(0),!0===p&&(h.properties.matrixPosition=[m,g])}a.push(l)}return a}function v(t,n,o){if(!u(o=o||{}))throw new Error("options is invalid");const i=o.zProperty||"elevation",a=o.commonProperties||{},f=o.breaksProperties||[];if(e(t,"Point","Input must contain Points"),!n)throw new Error("breaks is required");if(!Array.isArray(n))throw new Error("breaks is not an Array");if(!u(a))throw new Error("commonProperties is not an Object");if(!Array.isArray(f))throw new Error("breaksProperties is not an Array");const c=y(t,{zProperty:i,flip:!0});let l=function(r,t,n){const o=[];for(let e=1;e<t.length;e++){const i=+t[e-1],u=+t[e],p=P(w(m(r,i,u-i)));o.push({groupedRings:p,[n]:i+"-"+u})}return o}(c,n,i);l=function(t,n,o){const e=r(o),i=e[2]-e[0],u=e[3]-e[1],p=e[0],s=e[1],a=n[0].length-1,f=n.length-1,m=i/a,c=u/f;return t.map((function(r){return r.groupedRings=r.groupedRings.map((function(r){return r.map((function(r){return r.map((r=>[r[0]*m+p,r[1]*c+s]))}))})),r}))}(l,c,t);const g=l.map(((r,t)=>{if(f[t]&&!u(f[t]))throw new Error("Each mappedProperty is required to be an Object");const n=b(b({},a),f[t]);n[i]=r[i];return p(r.groupedRings,n)}));return s(g)}function w(r){const n=r.map((function(r){return{ring:r,area:t(a([r]))}}));return n.sort((function(r,t){return t.area-r.area})),n.map((function(r){return r.ring}))}function P(r){const t=r.map((r=>({lrCoordinates:r,grouped:!1}))),n=[];for(;!O(t);)for(let r=0;r<t.length;r++)if(!t[r].grouped){const o=[];o.push(t[r].lrCoordinates),t[r].grouped=!0;const e=a([t[r].lrCoordinates]);for(let n=r+1;n<t.length;n++)if(!t[n].grouped){E(a([t[n].lrCoordinates]),e)&&(o.push(t[n].lrCoordinates),t[n].grouped=!0)}n.push(o)}return n}function E(r,t){const e=o(r);for(let r=0;r<e.features.length;r++)if(!n(e.features[r],t))return!1;return!0}function O(r){for(let t=0;t<r.length;t++)if(!1===r[t].grouped)return!1;return!0}var j=v;export{j as default,v as isobands};
