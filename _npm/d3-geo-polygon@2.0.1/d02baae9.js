/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/d3-geo-polygon@2.0.1/src/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{Adder as t,merge as n,scan as e,greatest as o,range as r}from"../d3-array@3.2.4/e95f898e.js";import{geoProjection as i,geoArea as l,geoBounds as c,geoCentroid as u,geoInterpolate as a,geoGnomonic as s,geoDistance as f,geoStream as p,geoStereographicRaw as h,geoGnomonicRaw as g,geoContains as d,geoProjectionMutator as m,geoAzimuthalEqualAreaRaw as y}from"../d3-geo@3.1.1/dcd02767.js";import{geoBerghaus as M,geoGingery as P,geoHealpix as E,geoInterrupt as A,geoInterruptedBoggs as v,geoInterruptedHomolosine as G,geoInterruptedMollweide as x,geoInterruptedMollweideHemispheres as S,geoInterruptedSinuMollweide as w,geoInterruptedSinusoidal as B,geoTwoPointEquidistant as F}from"../d3-geo-projection@4.0.0/4d7a0412.js";function C(){}function D(t,n){return t&&n&&t[0]===n[0]&&t[1]===n[1]}function N(t,n,e,o){this.x=t,this.z=n,this.o=e,this.e=o,this.v=!1,this.n=this.p=null}function j(t){const n=t.length;if(!n)return;let e,o=0,r=t[0];for(;++o<n;)r.n=e=t[o],e.p=r,r=e;r.n=e=t[0],e.p=r}const I=Math.abs,b=Math.atan,R=Math.atan2,T=Math.cos,k=Math.exp,q=Math.floor,L=Math.hypot,z=Math.log,O=Math.max,H=Math.min,K=Math.pow,Q=Math.sign||function(t){return t>0?1:t<0?-1:0},_=Math.sin,V=Math.tan,W=1e-6,J=1e-12,U=Math.PI,X=U/2,Y=U/4,Z=Math.SQRT1_2,$=it(U),tt=2*U,nt=180/U,et=U/180;function ot(t){return t>1?X:t<-1?-X:Math.asin(t)}function rt(t){return t>1?0:t<-1?U:Math.acos(t)}function it(t){return t>0?Math.sqrt(t):0}function lt(t){return[R(t[1],t[0]),ot(t[2])]}function ct(t){const n=lt(t);return[n[0]*nt,n[1]*nt]}function ut(t){const n=t[0],e=t[1],o=T(e);return[o*T(n),o*_(n),_(e)]}function at(t){return ut([t[0]*et,t[1]*et])}function st(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function ft(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function pt(t){const n=L(t[0],t[1],t[2]);return[t[0]/n,t[1]/n,t[2]/n]}function ht(t,n){const e=n[0]-t[0],o=n[1]-t[1],r=n[2]-t[2];return e*e+o*o+r*r<J*J}function gt(n,e){const o=e[0],r=e[1],i=[_(o),-T(o),0];let l=0,c=0;const u=new t;for(let t=0,e=n.length;t<e;++t)if(s=(a=n[t]).length){var a,s,f=a[s-1],p=f[0],h=f[1]/2+Y,g=_(h),d=T(h);for(let t=0;t<s;++t,p=y,g=P,d=E,f=m){var m=a[t],y=m[0],M=m[1]/2+Y,P=_(M),E=T(M),A=y-p,v=A>=0?1:-1,G=v*A,x=G>U,S=g*P;if(u.add(R(S*v*_(G),d*E+S*T(G))),l+=x?A+v*tt:A,x^p>=o^y>=o){const t=pt(ft(ut(f),ut(m))),n=(x^A>=0?-1:1)*ot(pt(ft(i,t))[2]);(r>n||r===n&&(t[0]||t[1]))&&(c+=x^A>=0?1:-1)}}}return(l<-W||l<W&&+u<-W)^1&c}function dt(t,e,o,r,i,{clipPoint:l=!1}={}){return void 0===i&&(i=yt),function(c){const u=e(c),a=function(){let t,n=[];return{point:function(n,e,o,r){const i=[n,e];arguments.length>2&&(i.index=o,i.t=r),t.push(i)},lineStart:function(){n.push(t=[])},lineEnd:C,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){const e=n;return n=[],t=null,e}}}(),s=e(a);let f,p,h,g=!1;const d={point:m,lineStart:M,lineEnd:P,polygonStart:function(){d.point=E,d.lineStart=A,d.lineEnd=v,p=[],f=[]},polygonEnd:function(){d.point=m,d.lineStart=M,d.lineEnd=P,p=n(p);const t=gt(f,r);p.length?(g||(c.polygonStart(),g=!0),function(t,n,e,o,r){const i=[],l=[];if(t.forEach((t=>{let n;if((n=t.length-1)<=0)return;let e=t[0];const o=t[n];if(D(e,o)){r.lineStart();for(let o=0;o<n;++o)r.point((e=t[o])[0],e[1]);return void r.lineEnd()}let c;i.push(c=new N(e,t,null,!0)),l.push(c.o=new N(e,null,c,!1)),i.push(c=new N(o,t,null,!1)),l.push(c.o=new N(o,null,c,!0))})),!i.length)return;l.sort(n),j(i),j(l);for(let t=0,n=l.length;t<n;++t)l[t].e=e=!e;let c,u,a=i[0];for(;;){let t=a,n=!0;for(;t.v;)if((t=t.n)===a)return;c=t.z,r.lineStart();do{if(t.v=t.o.v=!0,t.e){if(n)for(let t=0,n=c.length;t<n;++t)r.point((u=c[t])[0],u[1]);else o(t.x,t.n.x,1,r);t=t.n}else{if(n){c=t.p.z;for(let t=c.length-1;t>=0;--t)r.point((u=c[t])[0],u[1])}else o(t.x,t.p.x,-1,r);t=t.p}t=t.o,c=t.z,n=!n}while(!t.v);r.lineEnd()}}(p,i,t,o,c)):t&&(g||(c.polygonStart(),g=!0),o(null,null,1,c)),g&&(c.polygonEnd(),g=!1),p=f=null},sphere:()=>o(null,null,1,c)};function m(n,e){(!l&&!h||t(n,e))&&c.point(n,e)}function y(t,n){u.point(t,n)}function M(){d.point=y,u.lineStart()}function P(){d.point=m,u.lineEnd()}function E(t,n,e){h.push([t,n]),s.point(t,n,e)}function A(){s.lineStart(),h=[]}function v(){E(h[0][0],h[0][1],!0),s.lineEnd();const t=s.clean(),n=a.result(),e=n.length;let o,r,i;if(h.pop(),f.push(h),h=null,e)if(1&t){if(r=n[0],(o=r.length-1)>0){g||(c.polygonStart(),g=!0),c.lineStart();for(let t=0;t<o;++t)c.point((i=r[t])[0],i[1]);c.lineEnd()}}else e>1&&2&t&&n.push(n.pop().concat(n.shift())),p.push(n.filter(mt))}return d}}function mt(t){return t.length>1}function yt(t,n){return((t=t.x)[0]<0?t[1]-X-W:X-t[1])-((n=n.x)[0]<0?n[1]-X-W:X-n[1])}class Mt{constructor(t,n){this.from=t,this.to=n,this.normal=ft(t,n),this.fromNormal=ft(this.normal,t),this.toNormal=ft(this.normal,n),this.l=rt(st(t,n))}}function Pt(t,n){if(ht(t.from,n.from)||ht(t.from,n.to))return t.from;if(ht(t.to,n.from)||ht(t.to,n.to))return t.to;const e=t.l+n.l<U?T(t.l+n.l)-W:-1;if(st(t.from,n.from)<e||st(t.from,n.to)<e||st(t.to,n.from)<e||st(t.to,n.to)<e)return;const o=pt(ft(t.normal,n.normal)),r=st(o,t.fromNormal),i=st(o,t.toNormal),l=st(o,n.fromNormal),c=st(o,n.toNormal);return r>=0&&i<=0&&l>=0&&c<=0?o:r<=0&&i>=0&&l<=0&&c>=0?o.map((t=>-t)):void 0}function Et(t,n){const e=st(t,n.fromNormal),o=st(t,n.toNormal);return t=st(t,n.normal),I(t)<J&&(e>-J&&o<J||e<J&&o>-J)}const At={};function vt(t,n){const e=t.map((t=>ut(t.map((t=>t*et))))),o=n.map((t=>ut(t.map((t=>t*et))))),r=Pt(new Mt(e[0],e[1]),new Mt(o[0],o[1]));return r?lt(r).map((t=>t*nt)):null}const Gt=t=>t;function xt(t){let n=!0;return function t(e){if("Polygon"===e.type&&(e={type:"MultiPolygon",coordinates:[e.coordinates]}),"MultiPolygon"!==e.type)return Gt;const o=e.coordinates.map((t=>{const e=function(t){return(n,e)=>gt(t,[n,e])}(t=t.map(St)),o=function(t){const n=[];let e;return t.forEach(((t,o)=>{const r=ut(t);return o&&n.push(new Mt(e,r)),e=r,t})),n}(t[0]);return dt(e,function(t,n){return function(e){let o,r,i,l,c,u,a,s=[];return{lineStart(){o=null,u=1,a=[]},lineEnd(){c&&s.push(a),s.forEach((t=>{e.lineStart(),t.forEach((t=>e.point(...t))),e.lineEnd()})),s=[]},point(e,f,p){-1==T(e)&&(e-=1e-5*Q(_(e))),p&&(e=r,f=i);let h=ut([.9999999999*e,f+1e-14]),g=c;if(o){const n=[];let r=new Mt(o,h);for(let i=0,l=100;i<t.length&&l>0;++i){const c=t[i],u=Pt(r,c);if(u){if(u===At||ht(u,o)||ht(u,h)||ht(u,c.from)||ht(u,c.to)){const t=1e-4;e=(e+3*U+Ft(i,l)*t)%(2*U)-U,f=H(U/2-t,O(t-U/2,f+Ft(i,l)*t)),r=new Mt(o,h=ut([e,f])),i=-1,--l,n.length=0;continue}const t=lt(u);u.distance=Bt(o,u),u.index=i,u.t=Bt(c.from,u),u[0]=t[0],u[1]=t[1],delete u[2],n.push(u)}}if(n.length){u=0,n.sort(((t,n)=>t.distance-n.distance));for(let t=0;t<n.length;++t){const e=n[t];g=!g,g?(a=[],a.push([e[0],e[1],e.index,e.t])):(a.push([e[0],e[1],e.index,e.t]),s.push(a))}}g&&a.push([e,f])}else{for(let n=0,o=100;n<t.length&&o>0;++n){if(Et(h,t[n])){const t=1e-4;h=ut([e=(e+3*U+Ft(n,o)*t)%(2*U)-U,f=H(U/2-1e-4,O(1e-4-U/2,f+Ft(n,o)*t))]),n=-1,--o}}l=g=n(r=e,i=f),g&&(a=[],a.push([e,f]))}o=h,c=g},clean:()=>u|(l&&c)<<1}}}(o,e),function(t,n){return(e,o,r,i)=>{if(null==e)i.polygonStart(),n.forEach((t=>{i.lineStart(),t.forEach((t=>i.point(t[0],t[1]))),i.lineEnd()})),i.polygonEnd();else if(e.index!==o.index&&null!=e.index&&null!=o.index)for(let n=e.index;n!==o.index;n=(n+r+t.length)%t.length){const e=t[n],o=lt(r>0?e.to:e.from);i.point(o[0],o[1])}else if(e.index===o.index&&e.t>o.t&&null!=e.index&&null!=o.index)for(let n=0;n<t.length;++n){const o=t[(e.index+n*r+t.length)%t.length],l=lt(r>0?o.to:o.from);i.point(l[0],l[1])}}}(o,t),t[0][0],wt,{clipPoint:n})}));function r(t){const n=o.map((n=>n(t)));return{point(t,e){n.forEach((n=>n.point(t,e)))},lineStart(){n.forEach((t=>t.lineStart()))},lineEnd(){n.forEach((t=>t.lineEnd()))},polygonStart(){n.forEach((t=>t.polygonStart()))},polygonEnd(){n.forEach((t=>t.polygonEnd()))},sphere(){n.forEach((t=>t.sphere()))}}}return r.polygon=n=>void 0!==n?t(e=n):e,r.clipPoint=o=>void 0!==o?(n=!!o,t(e)):n,r}(t)}function St(t){return t.map((t=>[t[0]*et,t[1]*et]))}function wt(t,n){return t=t.x,n=n.x,t.index-n.index||t.t-n.t}function Bt(t,n){const e=ft(t,n);return R(it(st(e,e)),st(t,n))}function Ft(t,n){return Q(_(100*t+n))}function Ct(t,n){const e=Nt(t[1],t[0]),o=Nt(n[1],n[0]),r=function(t,n){return R(t[0]*n[1]-t[1]*n[0],t[0]*n[0]+t[1]*n[1])}(e,o),i=jt(e)/jt(o);return Dt([1,0,t[0][0],0,1,t[0][1]],Dt([i,0,0,0,i,0],Dt([T(r),_(r),0,-_(r),T(r),0],[1,0,-n[0][0],0,1,-n[0][1]])))}function Dt(t,n){return[t[0]*n[0]+t[1]*n[3],t[0]*n[1]+t[1]*n[4],t[0]*n[2]+t[1]*n[5]+t[2],t[3]*n[0]+t[4]*n[3],t[3]*n[1]+t[4]*n[4],t[3]*n[2]+t[4]*n[5]+t[5]]}function Nt(t,n){return[t[0]-n[0],t[1]-n[1]]}function jt(t){return it(t[0]*t[0]+t[1]*t[1])}function It(t,n){function e(t,e){const o=n(t,e),r=o.project([t*nt,e*nt]),i=o.transform;return i?[i[0]*r[0]+i[1]*r[1]+i[2],-(i[3]*r[0]+i[4]*r[1]+i[5])]:[r[0],-r[1]]}function o(t,e){const r=t.project.invert;let i,l=e,c=t.transform;if(c&&(c=function(t){const n=1/(t[0]*t[4]-t[1]*t[3]);return[n*t[4],-n*t[1],n*(t[1]*t[5]-t[2]*t[4]),-n*t[3],n*t[0],n*(t[2]*t[3]-t[0]*t[5])]}(c),l=[c[0]*l[0]+c[1]*l[1]+c[2],c[3]*l[0]+c[4]*l[1]+c[5]]),r&&t===function(t){return n(t[0]*et,t[1]*et)}(i=r(l)))return i;const u=t.children;for(let t=0,n=u&&u.length;t<n;++t)if(i=o(u[t],e),i)return i}!function t(n,e){if(n.edges=function(t){const n=t.length,e=[];for(let o=0,r=t[n-1];o<n;++o)e.push([r,r=t[o]]);return e}(n.face),e.face){const t=n.shared=function(t,n){const e=t.length;let o,r,i=null;for(let l=0;l<e;++l){o=t[l];for(let t=n.length;--t>=0;)if(r=n[t],o[0]===r[0]&&o[1]===r[1]){if(i)return[i,o];i=o}}}(n.face,e.face),o=Ct(t.map(e.project),t.map(n.project));n.transform=e.transform?Dt(e.transform,o):o;let r=e.edges;for(let e=0,o=r.length;e<o;++e)D(t[0],r[e][1])&&D(t[1],r[e][0])&&(r[e]=n),D(t[0],r[e][0])&&D(t[1],r[e][1])&&(r[e]=n);r=n.edges;for(let n=0,o=r.length;n<o;++n)D(t[0],r[n][0])&&D(t[1],r[n][1])&&(r[n]=e),D(t[0],r[n][1])&&D(t[1],r[n][0])&&(r[n]=e)}else n.transform=e.transform;n.children&&n.children.forEach((e=>t(e,n)));return n}(t,{transform:null}),Rt(t)&&(e.invert=function(n,e){const r=o(t,[n,-e]);return r&&(r[0]*=et,r[1]*=et,r)});const r=i(e),c=[],u={type:"MultiPolygon",coordinates:[[c]]};return bt({point:(t,n)=>c.push([t,n])},t),c.push(c[0]),r.preclip(xt(u).clipPoint(l(u)<4*Math.PI-.1)),r.tree=function(){return t},r}function bt(t,n,e){let o,r,i=n.edges,l=i.length,s={type:"MultiPoint",coordinates:n.face},f=n.face.filter((function(t){return 90!==I(t[1])})),p=c({type:"MultiPoint",coordinates:f}),h=!1,g=-1,d=p[1][0]-p[0][0];if(n.centroid=180===d||360===d?[(p[0][0]+p[1][0])/2,(p[0][1]+p[1][1])/2]:u(s),e)for(;++g<l&&i[g]!==e;);++g;for(let c=0;c<l;++c)r=i[(c+g)%l],Array.isArray(r)?(h||(t.point((o=a(r[0],n.centroid)(W))[0],o[1]),h=!0),t.point((o=a(r[1],n.centroid)(W))[0],o[1])):(h=!1,r!==e&&bt(t,r,n))}function Rt(t){return t.project.invert||t.children&&t.children.some(Rt)}const Tt=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]];var kt=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map((t=>t.map((t=>Tt[t]))));function qt(t=(t=>{const n=u({type:"MultiPoint",coordinates:t});return s().scale(1).translate([0,0]).rotate([-n[0],-n[1]])})){const n=kt.map((n=>({face:n,project:t(n)})));return[-1,0,0,1,0,1,4,5].forEach(((t,e)=>{const o=n[t];o&&(o.children||(o.children=[])).push(n[e])})),It(n[0],((t,e)=>n[t<-U/2?e<0?6:4:t<0?e<0?2:0:t<U/2?e<0?3:1:e<0?7:5])).angle(-30).scale(101.858).center([0,45])}function Lt(t,n){const e=it(1-_(n));return[2/$*t*e,$*(1-e)]}Lt.invert=function(t,n){const e=n/$-1;return[e?t*it(U)/e/2:0,ot(1-e**2)]};const zt=2/it(3);function Ot(t,n){const e=Lt(t,n);return[e[0]*zt,e[1]]}function Ht(t=(t=>{const n=u({type:"MultiPoint",coordinates:t});return i(Ot).translate([0,0]).scale(1).rotate(n[1]>0?[-n[0],0]:[180-n[0],180])})){const n=kt.map((n=>({face:n,project:t(n)})));return[-1,0,0,1,0,1,4,5].forEach(((t,e)=>{const o=n[t];o&&(o.children||(o.children=[])).push(n[e])})),It(n[0],((t,e)=>n[t<-U/2?e<0?6:4:t<0?e<0?2:0:t<U/2?e<0?3:1:e<0?7:5])).angle(-30).scale(121.906).center([0,48.5904])}function Kt(t=(t=>{const n=6===t.length?u({type:"MultiPoint",coordinates:t}):t[0];return s().scale(1).translate([0,0]).rotate([-n[0],-n[1]])})){const n=kt.map((t=>{const n=t.map(Vt),e=n.length,o=[];let r,i=n[e-1];for(let t=0;t<e;++t)r=n[t],o.push(_t([.9486832980505138*i[0]+.31622776601683794*r[0],.9486832980505138*i[1]+.31622776601683794*r[1],.9486832980505138*i[2]+.31622776601683794*r[2]]),_t([.9486832980505138*r[0]+.31622776601683794*i[0],.9486832980505138*r[1]+.31622776601683794*i[1],.9486832980505138*r[2]+.31622776601683794*i[2]])),i=r;return o})),e=[],o=[-1,0,0,1,0,1,4,5];n.forEach(((t,r)=>{const i=kt[r],l=i.length,c=e[r]=[];for(let e=0;e<l;++e)n.push([i[e],t[(2*e+2)%(2*l)],t[(2*e+1)%(2*l)]]),o.push(r),c.push((u=Vt(t[(2*e+2)%(2*l)]),a=Vt(t[(2*e+1)%(2*l)]),[u[1]*a[2]-u[2]*a[1],u[2]*a[0]-u[0]*a[2],u[0]*a[1]-u[1]*a[0]]));var u,a}));const r=n.map((n=>({project:t(n),face:n})));return o.forEach(((t,n)=>{const e=r[t];e&&(e.children||(e.children=[])).push(r[n])})),It(r[0],(function(t,n){const o=T(n),i=[o*T(t),o*_(t),_(n)],l=t<-U/2?n<0?6:4:t<0?n<0?2:0:t<U/2?n<0?3:1:n<0?7:5,c=e[l];return r[Qt(c[0],i)<0?8+3*l:Qt(c[1],i)<0?8+3*l+1:Qt(c[2],i)<0?8+3*l+2:l]})).angle(-30).scale(110.625).center([0,45])}function Qt(t,n){let e=0;for(let o=0;o<t.length;++o)e+=t[o]*n[o];return e}function _t(t){return[R(t[1],t[0])*nt,ot(O(-1,H(1,t[2])))*nt]}function Vt(t){const n=t[0]*et,e=t[1]*et,o=T(e);return[o*T(n),o*_(n),_(e)]}Ot.invert=(t,n)=>Lt.invert(t/zt,n);const Wt=t=>s().scale(1).translate([0,0]).rotate([Math.abs(t.site[1])>89.99999999?0:-t.site[0],-t.site[1]]);function Jt(t=[],n={features:[]},e=Wt,o){void 0===o&&(o=function(t,n){let e=1/0,o=-1;for(let i=0;i<r.length;i++){const l=f(r[i].site,[t,n]);l<e&&(e=l,o=i)}return o});let r=[];function i(){r=n.features.map(((t,n)=>{const o=t.geometry.coordinates[0].slice(0,-1);return o.site=t.properties&&t.properties.sitecoordinates?t.properties.sitecoordinates:u(t.geometry),{face:o,site:o.site,id:n,project:e(o)}})),t.forEach(((t,n)=>{const e=r[t];e&&(e.children||(e.children=[])).push(r[n])}))}function l(t,n){return r[o(t*nt,n*nt)]}let c=s();return i(),function u(){let a=c.rotate(),s=c.translate(),f=c.center(),p=c.scale(),h=c.angle();return r.length&&(c=It(r.find(((n,e)=>n&&!r[t[e]])),l)),c.parents=function(n){return arguments.length?(t=n,i(),u()):t},c.polygons=function(t){return arguments.length?(n=t,i(),u()):n},c.faceProjection=function(t){return arguments.length?(e=t,i(),u()):e},c.faceFind=function(t){return arguments.length?(o=t,u()):o},c.rotate(a).translate(s).center(f).scale(p).angle(h)}()}function Ut(){const t=ot(1/it(3))*nt,n=rt((it(5)-1)/it(3)/2)*nt,e=90-n,o=rt(-(1+it(5))/it(3)/2)*nt,r={type:"FeatureCollection",features:[[[45,t],[0,n],[180,n],[135,t],[90,e]],[[45,t],[e,0],[-e,0],[-45,t],[0,n]],[[45,t],[90,e],[90,-e],[45,-t],[e,0]],[[0,n],[-45,t],[-90,e],[-135,t],[180,n]],[[e,0],[45,-t],[0,-n],[-45,-t],[-e,0]],[[90,e],[135,t],[o,0],[135,-t],[90,-e]],[[45,-t],[90,-e],[135,-t],[180,-n],[0,-n]],[[135,t],[180,n],[-135,t],[-o,0],[o,0]],[[-45,t],[-e,0],[-45,-t],[-90,-e],[-90,e]],[[-45,-t],[0,-n],[180,-n],[-135,-t],[-90,-e]],[[135,-t],[o,0],[-o,0],[-135,-t],[180,-n]],[[-135,t],[-90,e],[-90,-e],[-135,-t],[-o,0]]].map((t=>({type:"Feature",geometry:{type:"Polygon",coordinates:[[...t,t[0]]]}})))};return Jt().parents([-1,0,4,8,1,2,2,3,1,8,6,3]).angle(108).polygons(r).scale(99.8).rotate([-8,0,-32])}function Xt(t){function n(n,e){if(I(I(e)-X)<W)return[0,e<0?-2:2];const o=_(e),r=K((1+o)/(1-o),t/2),i=.5*(r+1/r)+T(n*=t);return[2*_(n)/i,(r-1/r)/i]}return n.invert=(n,e)=>{const o=I(e);if(I(o-2)<W)return n?null:[0,Q(e)*X];if(o>2)return null;const r=(n/=2)*n,i=(e/=2)*e;let l=2*e/(1+r+i);return l=K((1+l)/(1-l),1/t),[R(2*n,1-r-i)/t,ot((l-1)/(l+1))]},n}function Yt(t,n){return[t[0]*n[0]-t[1]*n[1],t[1]*n[0]+t[0]*n[1]]}function Zt(t,n){return[t[0]+n[0],t[1]+n[1]]}function $t(t,n){return[t[0]-n[0],t[1]-n[1]]}function tn(t){return t[0]*t[0]+t[1]*t[1]}function nn(t,n){const e=I(t),o=I(n);return 0===t?z(o):0===n?z(e):e<3e3&&o<3e3?.5*z(t*t+n*n):z(t/T(R(n,t)))}function en(t,n){let e,o,r=t[1];if(0===(t=t[0])&&0===r)return[0,0];if("number"==typeof n&&(n=[n,0]),!n[1]){if(0===r&&t>=0)return[K(t,n[0]),0];if(0===t)switch((n[1]%4+4)%4){case 0:return[K(r,n[0]),0];case 1:return[0,K(r,n[0])];case 2:return[-K(r,n[0]),0];case 3:return[0,-K(r,n[0])]}}return e=R(r,t),o=nn(t,r),t=k(n[0]*o-n[1]*e),r=n[1]*o+n[0]*e,[t*T(r),t*_(r)]}const on=[-.5,it(3)/2],rn=[1.7666387502854533,0],ln=.09;const cn=Xt?Xt(.5):null;function un(t,n){const o=cn(t,n),r=function(t){const n=en(on,e([0,1,2].map((function(n){return-Yt(t,en(on,[n,0]))[0]}))));let o=Yt(n,t);o=[1-o[0],-o[1]];const r=[1.44224957030741,.240374928384568,.0686785509670194,.0178055502507087,.00228276285265497,-.00148379585422573,-.00164287728109203,-.00102583417082273,-.000483607537673571,-.000167030822094781,-245024395166263e-19,214092375450951e-19,255897270486771e-19,173086854400834e-19,872756299984649e-20,318304486798473e-20,4.79323894565283e-7,-4.58968389565456e-7,-5.62970586787826e-7,-3.92135372833465e-7];let i=[0,0];for(let t=r.length;t--;)i=Zt([r[t],0],Yt(i,o));let l=Yt(Zt(rn,Yt([-i[0],-i[1]],en(o,1-2/3))),Yt(n,n));const c=tn(t);if(c<ln){const n=[1,1/3,5/27,10/81,22/243],e=en(t,[3,0]);let o=[0,0];for(let t=n.length;t--;)o=Zt([n[t],0],Yt(o,e));o=Yt(o,t),l=Zt(Yt(l,[c/ln,0]),Yt(o,[1-c/ln,0]))}return l}([o[1]/2,o[0]/2]);return[r[1],r[0]]}function an(){const t=i(un),n=t.stream;return t.stream=function(e){const o=t.rotate(),r=n(e),i=(t.rotate([0,0]),n(e));return t.rotate(o),r.sphere=function(){p(function(){const t=2*ot(1/it(5))*nt;return{type:"Polygon",coordinates:[[[0,90],[-180,-t+W],[0,-90],[180,-t+W],[0,90]]]}}(),i)},r},t.scale(188.305).translate([480,333.167])}function sn(t,n=40,e=J){return(o,r,i=0,l=0)=>{let c,u,a;for(let s=0;s<n;++s){const n=t(i,l),s=n[0]-o,f=n[1]-r;if(I(s)<e&&I(f)<e)break;const p=s*s+f*f;if(p>c){i-=u/=2,l-=a/=2;continue}c=p;const h=(i>0?-1:1)*e,g=(l>0?-1:1)*e,d=t(i+h,l),m=t(i,l+g),y=(d[0]-n[0])/h,M=(d[1]-n[1])/h,P=(m[0]-n[0])/g,E=(m[1]-n[1])/g,A=E*y-M*P,v=(I(A)<.5?.5:1)/A;if(u=(f*P-s*E)*v,a=(s*M-f*y)*v,i+=u,l+=a,I(u)<e&&I(a)<e)break}return[i,l]}}function fn(t,n){const e=[-.5,it(3)/2];let r=[0,0],i=[0,0],l=Yt(h(t,n),[it(2),0]);const c=o([0,1,2],(t=>Yt(l,en(e,[t,0]))[0])),u=en(e,[c,0]),a=it(tn(l));if(a>.3){const t=$t([1,0],Yt(u,l)),n=1.4021821053254548,e=[1.15470053837925,.192450089729875,.0481125224324687,.010309826235529,.000334114739114366,-.00150351632601465,-.0012304417796231,-.000675190201960282,-.000284084537293856,-821205120500051e-19,-159257630018706e-20,191691805888369e-19,173095888028726e-19,103865580818367e-19,470614523937179e-20,14413500104181e-19,1.92757960170179e-8,-3.82869799649063e-7,-3.57526015225576e-7,-2.2175964844211e-7];let o=[0,0];for(let n=e.length;n--;)o=Zt([e[n],0],Yt(o,t));r=$t([n,0],Yt(en(t,.5),o)),r=Yt(r,u),r=Yt(r,u)}if(a<.5){const t=[1,1/8,3/56,1/32,35/1664,63/4096,231/19456],n=en(l,[3,0]);for(let e=t.length;e--;)i=Zt([t[e],0],Yt(i,n));i=Yt(i,l)}if(a<.3)return i;if(a>.5)return r;const s=(a-.3)/.2;return Zt(Yt(r,[s,0]),Yt(i,[1-s,0]))}const pn=sn(fn);fn.invert=function(t,n){if(t>1.5)return!1;const e=pn(t,n,t,.5*n),o=fn(e[0],e[1]);return o[0]-=t,o[1]-=n,o[0]*o[0]+o[1]*o[1]<1e-8?e:[-10,0]};const hn=ot(1/3),gn=[[0,90],[-180,-hn*nt],[-60,-hn*nt],[60,-hn*nt]],dn=[[1,2,3],[0,2,1],[0,3,2],[0,1,3]].map((t=>t.map((t=>gn[t]))));function mn(t=(t=>{const n=u({type:"MultiPoint",coordinates:t}),e=90==I(n[1])?[0,-n[1],-30]:[-n[0],-n[1],30];return i(fn).scale(1).translate([0,0]).rotate(e)})){return Jt([-1,0,0,0],{features:dn.map((t=>({type:"Feature",geometry:{type:"Polygon",coordinates:[[...t,t[0]]]}})))},t).rotate([30,180]).angle(30).scale(118.662).translate([480,195.47])}function yn(){const t=it(3),n=it(5+2*it(5))/it(15),e=it(8)/it(5+it(5)),o=it(3+it(5))/it(5+it(5)),r=function(r,i){const l=T(i),c=n/(l*T(r)),u=l*_(r)*c,a=_(i)*c,s=R(2*a/t+e/3-e/2,o),f=R(u-a/t+e/3-e/2,o),p=R(e/3-u-a/t-e/2,o);return[t*(f-p),2*s-f-p]};return r.invert=function(t,n){if(t*t+n*n>5)return[0,3];const e=2.9309936378128416,o=g.invert(t/e,n/e);let i,l,c=0;do{const e=r(o[0],o[1]);i=t-e[0],l=n-e[1],o[0]+=.2*i,o[1]+=.2*l}while(c++<30&&I(i)+I(l)>W);return o},r}function Mn(){return function(t){const n=b(.5)*nt,e=[[0,90],[0,-90]].concat(r(10).map((t=>[(36*t+180)%360-180,1&t?n:-n]))),o=[[0,3,11],[0,5,3],[0,7,5],[0,9,7],[0,11,9],[2,11,3],[3,4,2],[4,3,5],[5,6,4],[6,5,7],[7,8,6],[8,7,9],[9,10,8],[10,9,11],[11,2,10],[1,2,4],[1,4,6],[1,6,8],[1,8,10],[1,10,2]].map((t=>t.map((t=>e[t]))));return o.forEach((t=>t.centroid=u({type:"MultiPoint",coordinates:t}))),function(){let t,n,e,r;t=o[15],r=t.centroid,n=t.slice(),t[0]=r,t=[n[0],r,n[2]],t.centroid=r,o.push(t),t=[n[0],n[1],r],t.centroid=r,o.push(t),t=o[14],r=t.centroid,n=t.slice();const i=s().scale(1).translate([0,0]).rotate([-r[0],-r[1]]),l=i(t[1]),c=i(t[2]);e=i.invert([(l[0]+c[0])/2,(l[1]+c[1])/2]),t[1]=e,t=[n[0],n[1],e],t.centroid=r,o.push(t),t=o[19],r=t.centroid,n=t.slice(),t[1]=e,t=[e,n[0],n[1]],t.centroid=r,o.push(t)}(),function(t){t=t||(t=>s().scale(1).translate([0,0]).rotate([-t.centroid[0],-t.centroid[1]]));const n=o.map(((n,e)=>{const o=n.slice();return o.push(o[0]),{face:n,site:n.centroid,id:e,contains:function(t,n){return d({type:"Polygon",coordinates:[o]},[t*nt,n*nt])},project:t(n)}}));[-1,0,1,11,13,6,7,1,7,8,9,10,11,12,13,6,8,10,17,21,16,15,19,19].forEach(((t,e)=>{const o=n[t];o&&(o.children||(o.children=[])).push(n[e])}));const e=It(n[0],(function(t,e){for(let o=0;o<n.length;++o)if(n[o].contains(t,e))return n[o]}));return e.faces=n,e}(t)}((t=>{const n=t.centroid;return t.direction=Math.abs(n[1]-52.62)<1||Math.abs(n[1]+10.81)<1?0:60,i(yn()).scale(1).translate([0,0]).rotate([-n[0],-n[1],t.direction||0])})).rotate([-83.65929,25.44458,-87.45184]).angle(-60).scale(45.4631).center([126,0])}function Pn(){const t=b(.5)*nt,n=[[0,90],[0,-90]].concat([0,1,2,3,4,5,6,7,8,9].map((n=>[(36*n+180)%360-180,1&n?t:-t]))),e={type:"FeatureCollection",features:[[0,3,11],[0,5,3],[0,7,5],[0,9,7],[0,11,9],[2,11,3],[3,4,2],[4,3,5],[5,6,4],[6,5,7],[7,8,6],[8,7,9],[9,10,8],[10,9,11],[11,2,10],[1,2,4],[1,4,6],[1,6,8],[1,8,10],[1,10,2]].map((t=>t.map((t=>n[t])))).map((t=>({type:"Feature",geometry:{type:"Polygon",coordinates:[[...t,t[0]]]}})))};return Jt().parents([-1,7,9,11,13,0,5,6,7,8,9,10,11,12,13,6,8,10,12,14]).polygons(e).rotate([108,0]).scale(131.777).center([162,0])}const En=ot(1/3),An=[[X,0,0,-X,0,it(3)],[-En,0,U,X,0,-it(3)],[-En,2*U/3,U,5*U/6,3,0],[-En,-2*U/3,U,U/6,-3,0]],vn={sphereSym:3,planarSym:6,width:6,height:2*it(3),centrums:An,rotateOOB:function(t,n,e,o){return I(t)>this.width/2?[2*e-t,-n]:[-t,this.height*Q(n)-n]},inBounds:()=>!0};function Gn(t){function n(n,e){const o=function(t,n,e){let o,r,i,l=100;e=void 0===e?0:+e,n=+n;do{r=t(e),i=t(e+W),r===i&&(i=r+W),e-=o=-1*W*(r-n)/(r-i)}while(l-- >0&&I(o)>W);return l<0?NaN:e}((t=>b((t-ot(_(t)/it(3)))/U*it(12))),e,e/2),r=n/(it(3)/T(e));return[X-K(r,1/t)*b(it(2)/T(o)),o]}function e(t,n,e){if(null==e)return[t,n];const o=e[0],r=e[1],i=e[2];let l,c;return l=o==X?t:ot(_(o)*_(t)+T(o)*T(t)*T(r-n)),o==X?c=n-r:o==-X?c=r-n-U:(c=rt((T(o)*_(t)-_(o)*T(t)*T(r-n))/T(l))-U,isNaN(c)?c=T(r-n)>=0&&t<o||T(r-n)<0&&t<-o?0:-U:_(n-r)>0&&(c=-c)),c-=i,[l,c]}function o(n,o){const r=vn.width,i=vn.height,l=vn.sphereSym;let c=-1/0,u=-1/0,a=null;for(const t of An){const r=e(o,n,t);r[0]>c&&(c=r[0],u=r[1],a=t)}const s=q((u+U/l)/(2*U/l))*(2*U/l),f=function(n,e){const o=b((n-ot(_(n)/it(3)))/U*it(12)),r=(X-e)/b(it(2)/T(n));return[K(r,t)*it(3)/T(o),o]}(u-s,c),p=f[0],h=f[1]+a[3]+s*l/vn.planarSym,g=a[4],d=a[5];let m=[p*T(h)+g,p*_(h)+d];return(I(m[0])>r/2||I(m[1])>i/2)&&(m=vn.rotateOOB(m[0],m[1],g,d)),m}return o.invert=function(t,e){if(isNaN(t)||isNaN(e))return null;const o=vn.planarSym;let r=1/0,i=null;for(const n of An){const o=L(t-n[4],e-n[5]);o<r&&(r=o,i=n)}const l=i[3],c=i[4],u=i[5],a=L(t-c,e-u),s=R(e-u,t-c)-l,f=q((s+U/o)/(2*U/o))*(2*U/o);let p=n(a,s-f);if(null==p)return null;p[1]=f*o/vn.sphereSym+p[1];let h=function(t,n){if(null==n)return t;let e=t[0],o=t[1];const r=n[0],i=n[1];o+=n[2];let l,c=ot(_(r)*_(e)-T(r)*T(o)*T(e)),u=_(e)/T(r)/T(c)-V(r)*V(c);return l=r==X?o+i:r==-X?-o+i+U:I(u)>1?0==o&&e<-r||0!=o&&e<r?i+U:i:_(o)>0?i+rt(u):i-rt(u),[c,l,n[2]]}(p,i);return[h[1],h[0]]},o}function xn(){let t=.68;const n=m(Gn),e=n(t);e.k=function(e){return arguments.length?n(t=+e):t};const o=-b(1/it(2))*nt,r=[[-180+W,o+W],[0,90],[180-W,o+W],[180-W,o-W],[-180+W,o-W],[-180+W,o+W]];return e.preclip(xt({type:"Polygon",coordinates:[r]})).scale(144.04).rotate([18,-12.5,3.5]).center([0,35.2644])}function Sn(t,n){const e=Gn(t),o=vn.height;function r(t,r){const i=e(t,r),l=[i[1],-i[0]];return l[1]>0&&(l[0]=o-l[0],l[1]*=-1),l[0]+=n,l[0]<0&&(l[0]+=2*o),l}return r.invert=function(t,r){return(t=(t-n)/o)>1.5&&(t-=2),t>.5&&(t=1-t,r*=-1),e.invert(-r,t*o)},r}function wn(){let t=.59,n=1.16;const e=m(Sn),o=e(t,n);function r(t){const e=100+2*W,o=[],r=t.scale(),i=t.center(),l=t.translate(),c=t.rotate();t.scale(1).center([0,90]).rotate([0,0]).translate([n,0]);for(let n=e-W;n>0;n--)o.unshift(t.invert([1.5*vn.height-.003,vn.width/2*n/e])),o.push(t.invert([-.5*vn.height+.003,vn.width/2*n/e]));return o.push(o[0]),t.scale(r).center(i).translate(l).rotate(c).preclip(xt({type:"Polygon",coordinates:[o]}))}return o.shift=function(o){return arguments.length?r(e(t,n=+o)):n},o.k=function(o){return arguments.length?r(e(t=+o,n)):t},r(o).rotate([18,-12.5,3.5]).scale(138.42).translate([480,250]).center([-139.405,40.5844])}const Bn=b(Z)*nt,Fn=[[0,Bn],[90,Bn],[180,Bn],[-90,Bn],[0,-Bn],[90,-Bn],[180,-Bn],[-90,-Bn]],Cn=[[0,3,2,1],[0,1,5,4],[1,2,6,5],[2,3,7,6],[3,0,4,7],[4,5,6,7]].map((t=>t.map((t=>Fn[t]))));function Dn(){const t={type:"FeatureCollection",features:Cn.map((t=>({type:"Feature",geometry:{type:"Polygon",coordinates:[[...t,t[0]]]}})))};return Jt().polygons(t).parents([-1,0,1,5,3,2]).scale(96.8737).center([135,-45]).rotate([120,0])}function Nn(){const t=b(Math.SQRT1_2)*nt,n=[[0,90],[0,t],[90,t],[180,t],[-90,t],[45,0],[135,0],[-135,0],[-45,0],[0,-t],[90,-t],[180,-t],[-90,-t],[0,-90]],e={type:"FeatureCollection",features:[[0,1,8,4],[0,2,5,1],[0,3,6,2],[0,4,7,3],[1,5,9,8],[2,6,10,5],[3,7,11,6],[4,8,12,7],[8,9,13,12],[5,10,13,9],[6,11,13,10],[7,12,13,11]].map((t=>t.map((t=>n[t])))).map((t=>({type:"Feature",properties:{sitecoordinates:u({type:"MultiPoint",coordinates:t})},geometry:{type:"Polygon",coordinates:[[...t,t[0]]]}})))};return Jt().polygons(e).parents([-1,0,6,2,1,9,11,3,4,8,5,10]).angle(20).rotate([80,0,90*-Math.asin(Math.sqrt(3)/3)]).translate([213,252]).scale(106.48)}function jn(){const t=b(.5)*nt,n=[[0,90],[0,-90]].concat([0,1,2,3,4,5,6,7,8,9].map((n=>[(36*n+180)%360-180,1&n?t:-t]))),e={type:"FeatureCollection",features:[[0,3,11],[0,5,3],[0,7,5],[0,9,7],[0,11,9],[2,11,3],[3,4,2],[4,3,5],[5,6,4],[6,5,7],[7,8,6],[8,7,9],[9,10,8],[10,9,11],[11,2,10],[1,2,4],[1,4,6],[1,6,8],[1,8,10],[1,10,2]].map((t=>{const e=t.map((t=>n[t])),o=a(e[1],e[2])(.5),r=a(e[0],e[2])(.5),i=a(e[0],e[1])(.5),l=u({type:"MultiPoint",coordinates:e});return[[e[0],i,l,r],[e[1],o,l,i],[e[2],r,l,o]]})).flat().map((t=>({type:"Feature",properties:{sitecoordinates:u({type:"MultiPoint",coordinates:t})},geometry:{type:"Polygon",coordinates:[[...t,t[0]]]}})))};return Jt().parents([-1,2,0,5,5,22,8,8,28,11,11,34,14,14,40,16,2,16,17,18,18,19,21,21,23,24,24,25,27,27,29,30,30,31,33,33,35,36,36,37,39,39,41,42,42,46,20,46,49,26,49,52,32,52,55,38,55,58,44,58]).polygons(e).angle(3).rotate([108,0]).translate([72,252]).scale(136.67)}function In(t){t=t||(()=>function(){const t=1e4,n=m(bn);return n(t)}().scale(1));const n=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],e=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map((t=>t.map((t=>n[t])))),o=e.map((t=>{const n=t.map(at),e=n.length,o=17*et,r=T(o),i=_(o),l=[];let c,u=n[e-1];for(let t=0;t<e;++t)c=n[t],l.push(ct([u[0]*r+c[0]*i,u[1]*r+c[1]*i,u[2]*r+c[2]*i]),ct([c[0]*r+u[0]*i,c[1]*r+u[1]*i,c[2]*r+u[2]*i])),u=c;return l})),r=[],i=[-1,3,0,2,0,1,4,5];o.forEach(((t,n)=>{const l=e[n],c=l.length,u=r[n]=[];for(let e=0;e<c;++e)o.push([l[e],t[(2*e+2)%(2*c)],t[(2*e+1)%(2*c)]]),i.push(n),u.push(ft(at(t[(2*e+2)%(2*c)]),at(t[(2*e+1)%(2*c)])))}));const l=o.map((n=>({project:t(n),face:n})));return i.forEach(((t,n)=>{const e=l[t];e&&(e.children||(e.children=[])).push(l[n])})),It(l[0],(function(t,n){const e=T(n),o=[e*T(t),e*_(t),_(n)],i=t<-U/2?n<0?6:4:t<0?n<0?2:0:t<U/2?n<0?3:1:n<0?7:5,c=r[i];return l[st(c[0],o)<0?8+3*i:st(c[1],o)<0?8+3*i+1:st(c[2],o)<0?8+3*i+2:i]})).scale(.023975).rotate([20,0]).center([0,-17])}function bn(t){const n={lengthMG:t};function e(t,n){return Math.hypot(t[0]-n[0],t[1]-n[1])}function o(t,n,e,o){return[e[0]+(o[0]-e[0])*t/n,e[1]+(o[1]-e[1])*t/n]}function r(t,n,e,o){const r=V(n*et),i=V(o*et),l=(r*t[0]-i*e[0]-t[1]+e[1])/(r-i);return[l,r*(l-t[0])+t[1]]}function i(t,n,e,o){let r=e[0],i=e[1],l=o[0],c=o[1],u=t[0],a=t[1],s=(l-r)*(l-r)+(c-i)*(c-i),f=2*((l-r)*(r-u)+(c-i)*(i-a)),p=f*f-4*s*(u*u+a*a+r*r+i*i-2*(u*r+a*i)-n*n),h=0,g=0,d=0,m=0;return 0===s||p<0?[0,[0,0]]:(h=(-f+it(p))/(2*s),g=(-f-it(p))/(2*s),0<=h&&h<=1?(d=r+h*(l-r),m=i+h*(c-i),[1,[d,m]]):0<=g&&g<=1?(d=r+g*(l-r),m=i+g*(c-i),[1,[d,m]]):[0,[0,0]])}function l(t,e){const o=[0,0];return-60===e?(o[0]=t[0]*n.cos60+t[1]*n.sin60,o[1]=-t[0]*n.sin60+t[1]*n.cos60):-120===e?(o[0]=-t[0]*n.cos60+t[1]*n.sin60,o[1]=-t[0]*n.sin60-t[1]*n.cos60):(o[0]=t[0]*T(e*et)-t[1]*_(e*et),o[1]=t[0]*_(e*et)+t[1]*T(e*et)),o}function c(t){const e=n.deltaMEq*t;return e<=n.lengthGF?[n.pointG[0],e]:o(e-n.lengthGF,n.lengthAB,n.pointF,n.pointE)}function u(t){return c(t)}function a(t){return r(n.pointM,2*t/3,u(t),t/3)}function s(t){return 0===t?[n.pointA+n.lengthAB,0]:r(n.pointA,t,n.pointM,2*t/3)}function f(t){return e(u(t),a(t))}function p(t){return e(a(t),s(t))}function h(t){let o=[0,0],i=s(t),l=0,c=[0,0];return t<=30?(o[0]=n.pointA[0]+n.lengthAP73*T(t*et),o[1]=n.pointA[1]+n.lengthAP73*_(t*et),l=e(i,o)):(o=r(n.pointT,-60,i,t),l=e(i,o),t>44&&(c=r(n.pointT,-60,i,2/3*t),c[0]>o[0]&&(o=c,l=-e(i,o)))),{parallel73:o,lengthParallel73:l}}function g(t){return[n.pointA[0]+n.lengthAP75*T(t*et),n.pointA[1]+n.lengthAP75*_(t*et)]}function d(t,n){let e=(o=(t+180)/90+1,Math[o>0?"floor":"ceil"](o));var o;let r=(t+720)%90-45;const i=Q(r);return r=I(r),5===e&&(e=1),n<0&&(e=[0,6,7,8,5][e]),[r,I(n),i,e]}function m(t,r){if(0===t)return r>=75?function(t,e){return[n.pointA[0]+104*(90-e),0]}(0,r):function(t,e){return[n.pointG[0]-100*e,0]}(0,r);if(r>=75)return function(t,e){const o=104*(90-e);return[n.pointA[0]+o*T(t*et),n.pointA[1]+o*_(t*et)]}(t,r);if(0===r)return function(t){return c(t)}(t);if(r>=73&&t<=30)return function(t,e){const o=1560+100*(75-e);return[n.pointA[0]+o*T(t*et),n.pointA[1]+o*_(t*et)]}(t,r);if(45===t)return r<=15?function(t,e){return o(e,15,n.pointE,n.pointD)}(0,r):r<=73?function(t,e){return o(e-15,58,n.pointD,n.pointT)}(0,r):function(t,r){const i=g(45),l=h(t).parallel73,c=e(n.pointT,n.pointB),u=e(n.pointB,i),a=(75-r)*(u+c)/2;return a<=u?o(a,u,i,n.pointB):o(a-u,c,n.pointB,l)}(t,r);if(t<=29)return function(t,n){const e=h(t),r=f(t),i=p(t),l=n*(r+i+e.lengthParallel73)/73;return l<=r?o(l,r,u(t),a(t)):l<=r+i?o(l-r,i,a(t),s(t)):o(l-r-i,e.lengthParallel73,s(t),e.parallel73)}(t,r);if(r>=73)return function(t,n){const r=g(t),i=e(s(t),r),l=h(t),c=l.parallel73,u=l.lengthParallel73,a=(75-n)*(i-u)/2;return a<=i?o(a,i,r,s(t)):o(a-i,-u,s(t),c)}(t,r);{const l=f(t);let c,g=i(n.pointC,n.radius,a(t),s(t)),d=g[0],m=g[1];return 1===d?c=l+e(a(t),m):(g=i(n.pointC,n.radius,u(t),a(t)),d=g[0],m=g[1],c=l-e(a(t),m)),r<=15?function(t,n,e){const r=n*e/15,i=f(t),l=p(t);return r<=i?o(r,i,u(t),a(t)):o(r-i,l,a(t),s(t))}(t,r,c):function(t,n,e){const r=h(t),i=r.parallel73,l=f(t),c=p(t),g=r.lengthParallel73,d=e+(n-15)*(l+c+g-e)/58;return d<=l?o(d,l,u(t),s(t)):d<=l+c?o(d-l,c,a(t),s(t)):o(d-l-c,g,s(t),i)}(t,r,c)}}function y(t,e){const o=d(t*nt,e*nt),r=o[0],i=o[1],c=o[2],u=o[3],a=m(r,i);return function(t,e){let o;return 0===e?o=l(t,-60):1===e?(o=l(t,-120),o[0]-=n.lengthMG):2===e?(o=l(t,-60),o[0]-=n.lengthMG):3===e?(o=l(t,-120),o[0]+=n.lengthMG):4===e?(o=l(t,-60),o[0]+=n.lengthMG):5===e?(o=l([2*n.lengthMG-t[0],t[1]],-60),o[0]+=n.lengthMG):6===e?(o=l([2*n.lengthMG-t[0],t[1]],-120),o[0]-=n.lengthMG):7===e?(o=l([2*n.lengthMG-t[0],t[1]],-60),o[0]-=n.lengthMG):8===e&&(o=l([2*n.lengthMG-t[0],t[1]],-120),o[0]+=n.lengthMG),o}([a[0],c*a[1]],u)}return function(){let t,i,l,c,u,g,d,m,y,M,P,E=it(3);n.lengthMA=.094*n.lengthMG,n.lengthParallel0to73At0=n.lengthMG/100,n.lengthParallel73to90At0=(n.lengthMG-n.lengthMA-73*n.lengthParallel0to73At0)/17,n.sin60=E/2,n.cos60=.5,n.pointM=[0,0],n.pointG=[n.lengthMG,0],t=[n.lengthMG,n.lengthMG*V(30*et)],n.pointA=[n.lengthMA,0],n.pointB=r(n.pointM,30,n.pointA,45),n.lengthAG=e(n.pointA,n.pointG),n.lengthAB=e(n.pointA,n.pointB),i=e(n.pointM,n.pointB),l=e(n.pointM,t),c=e(t,n.pointG),n.pointD=o(i,l,t,n.pointM),n.pointF=[n.lengthMG,c-i],n.pointE=[t[0]-n.lengthMA*_(30*et),t[1]-n.lengthMA*T(30*et)],n.lengthGF=e(n.pointG,n.pointF),n.lengthBD=e(n.pointB,n.pointD),n.lengthBDE=n.lengthBD+n.lengthAB,n.lengthGFE=n.lengthGF+n.lengthAB,n.deltaMEq=n.lengthGFE/45,n.lengthAP75=15*n.lengthParallel73to90At0,n.lengthAP73=n.lengthMG-n.lengthMA-73*n.lengthParallel0to73At0,u=[n.pointA[0]+n.lengthAP73*T(30*et),n.pointA[1]+n.lengthAP73*_(30*et)],n.pointT=r(u,-60,n.pointB,30),g=h(29),d=g.lengthParallel73,m=f(29),y=p(29),M=15*(m+y+d)/73,P=[0,0],n.pointC=[0,0],n.radius=0,M-=m,P=o(M,y,a(29),s(29)),n.pointC[1]=(P[0]*P[0]+P[1]*P[1]-n.pointD[0]*n.pointD[0]-n.pointD[1]*n.pointD[1])/(2*(E*P[0]+P[1]-E*n.pointD[0]-n.pointD[1])),n.pointC[0]=E*n.pointC[1],n.radius=e(n.pointC,n.pointD)}(),y.invert=sn(y),y}const Rn=y,Tn=-.05,kn=1e-10,qn=90,Ln=[0,5.022570623227068],zn=79.92959180396787,On=[479.9999905630355,250.35977064160338],Hn=[[-180,-1e-4],[180,-1e-4],[1e-4,Tn],[-1e-4,Tn]];function Kn(t=Rn){function n(n,e){const o=Yt(t(n,e),[T(-U/2),_(-U/2)]);return 0==o[0]&&0==o[1]&&(o[0]+=kn,o[1]+=kn),[nn(o[0],o[1]),R(o[1],o[0])]}return n.invert=function(n,e){const o=Yt([k(n)*T(e),k(n)*_(e)],[T(U/2),_(U/2)]);return t.invert(o[0],o[1])},n}function Qn(t=Rn,n=-.05){const e=m(Kn),o=e(t);function r(t){const e=t.angle(),o=t.scale(),r=t.center(),i=t.translate(),l=t.rotate();t.angle(qn).scale(1).center([0,0]).rotate([0,0]).translate([0,0]).preclip();const c=t(Hn[0]),u=t(Hn[1]),a=t([Hn[2][0],n]),s=t([Hn[3][0],n]),f=I(u[0]-c[0]),p=I(a[1]-u[1]),h={type:"Polygon",coordinates:[[c,...Array.from({length:5},((t,n)=>[a[0],a[1]-p*(5-n)/5])),...Array.from({length:50},((t,n)=>[a[0]-f*n/50,a[1]])),...Array.from({length:5},((t,n)=>[s[0],s[1]-p*n/5])),c].map((n=>t.invert(n)))]};return t.angle(e).scale(o).center(r).translate(i).rotate(l).preclip(xt(h))}return o.planarProjectionRaw=function(n){return arguments.length?r(e(t=n)):t},o.cutoffLatitude=function(o){return arguments.length?(n=o,r(e(t))):n},r(o).angle(qn).center(Ln).scale(zn).translate(On)}function _n(){return oe(M.apply(this,arguments))}function Vn(){return oe(P.apply(this,arguments))}function Wn(){return oe(E.apply(this,arguments),!0)}function Jn(){return re(A.apply(this,arguments))}function Un(){return re(v.apply(this,arguments))}function Xn(){return re(G.apply(this,arguments))}function Yn(){return re(x.apply(this,arguments))}function Zn(){return re(S.apply(this,arguments))}function $n(){return re(w.apply(this,arguments))}function te(){return re(B.apply(this,arguments))}function ne(){return ie.apply(this,arguments)}function ee(){return ne([-158,21.5],[-77,39])}function oe(t,n=!1){const{lobes:e}=t;return function t(o){const r=o.rotate(),i=o.scale(),l=o.translate();o.rotate([0,0]).translate([0,0]),o.lobes=function(n){return arguments.length?t(e(n)):e()},o.preclip((t=>t));const c=1-1e-7,u=n?1:c;let a=[];return o.stream({point(t,n){a.push([t*u,n*c])},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}}).sphere(),o.scale(i),a=a.map(o.invert),a.push(a[0]),o.rotate(r).translate(l).preclip(xt({type:"Polygon",coordinates:[a]}))}(t)}function re(t){const{lobes:e}=t;return function t(o){const r=e?.(),i=n(Array.from(r,((t,n)=>{const e=t.flatMap((t=>Array.from(t,(n=>a(n,[t[1][0],0])(1e-9)))));return 0===n?e:[...e].reverse()})));return o.lobes=function(n){return arguments.length?t(e(n)):e()},o.preclip(xt({type:"Polygon",coordinates:[[...i,i[0]]]}))}(t)}function ie(t,n){const e=.001,o=90*f(t,n)/Math.PI+e,r={type:"Polygon",coordinates:[[[180-o,e],[180-o,-.001],[-180+o,-.001],[-180+o,e],[180-o,e]]]};return F(t,n).preclip(xt(r).clipPoint(!1))}export{Mn as geoAirocean,_n as geoBerghaus,In as geoCahillKeyes,bn as geoCahillKeyesRaw,xt as geoClipPolygon,Qn as geoComplexLog,Kn as geoComplexLogRaw,an as geoCox,un as geoCoxRaw,Dn as geoCubic,jn as geoDeltoidal,Ut as geoDodecahedral,Vn as geoGingery,yn as geoGrayFullerRaw,Wn as geoHealpix,Pn as geoIcosahedral,wn as geoImago,xn as geoImagoBlock,Gn as geoImagoRaw,Jn as geoInterrupt,Un as geoInterruptedBoggs,Xn as geoInterruptedHomolosine,Yn as geoInterruptedMollweide,Zn as geoInterruptedMollweideHemispheres,$n as geoInterruptedSinuMollweide,te as geoInterruptedSinusoidal,vt as geoIntersectArc,fn as geoLeeRaw,It as geoPolyhedral,qt as geoPolyhedralButterfly,Ht as geoPolyhedralCollignon,Jt as geoPolyhedralVoronoi,Kt as geoPolyhedralWaterman,Nn as geoRhombic,mn as geoTetrahedralLee,ne as geoTwoPointEquidistant,ee as geoTwoPointEquidistantUsa};export default null;
