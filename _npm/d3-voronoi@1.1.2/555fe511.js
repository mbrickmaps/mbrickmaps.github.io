/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/d3-voronoi@1.1.2/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
function e(e){return function(){return e}}function t(e){return e[0]}function n(e){return e[1]}function r(){this._=null}function i(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function f(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function s(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function u(e){for(;e.L;)e=e.L;return e}function l(e,t,n,r){var i=[null,null],f=q.push(i)-1;return i.left=e,i.right=t,n&&o(i,e,t,n),r&&o(i,t,e,r),m[e.index].halfedges.push(f),m[t.index].halfedges.push(f),i}function a(e,t,n){var r=[t,n];return r.left=e,r}function o(e,t,n,r){e[0]||e[1]?e.left===n?e[1]=r:e[0]=r:(e[0]=r,e.left=t,e.right=n)}function h(e,t,n,r,i){var f,s=e[0],u=e[1],l=s[0],a=s[1],o=0,h=1,c=u[0]-l,g=u[1]-a;if(f=t-l,c||!(f>0)){if(f/=c,c<0){if(f<o)return;f<h&&(h=f)}else if(c>0){if(f>h)return;f>o&&(o=f)}if(f=r-l,c||!(f<0)){if(f/=c,c<0){if(f>h)return;f>o&&(o=f)}else if(c>0){if(f<o)return;f<h&&(h=f)}if(f=n-a,g||!(f>0)){if(f/=g,g<0){if(f<o)return;f<h&&(h=f)}else if(g>0){if(f>h)return;f>o&&(o=f)}if(f=i-a,g||!(f<0)){if(f/=g,g<0){if(f>h)return;f>o&&(o=f)}else if(g>0){if(f<o)return;f<h&&(h=f)}return!(o>0||h<1)||(o>0&&(e[0]=[l+o*c,a+o*g]),h<1&&(e[1]=[l+h*c,a+h*g]),!0)}}}}}function c(e,t,n,r,i){var f=e[1];if(f)return!0;var s,u,l=e[0],a=e.left,o=e.right,h=a[0],c=a[1],g=o[0],v=o[1],d=(h+g)/2,C=(c+v)/2;if(v===c){if(d<t||d>=r)return;if(h>g){if(l){if(l[1]>=i)return}else l=[d,n];f=[d,i]}else{if(l){if(l[1]<n)return}else l=[d,i];f=[d,n]}}else if(u=C-(s=(h-g)/(v-c))*d,s<-1||s>1)if(h>g){if(l){if(l[1]>=i)return}else l=[(n-u)/s,n];f=[(i-u)/s,i]}else{if(l){if(l[1]<n)return}else l=[(i-u)/s,i];f=[(n-u)/s,n]}else if(c<v){if(l){if(l[0]>=r)return}else l=[t,s*t+u];f=[r,s*r+u]}else{if(l){if(l[0]<t)return}else l=[r,s*r+u];f=[t,s*t+u]}return e[0]=l,e[1]=f,!0}function g(e,t){var n=e.site,r=t.left,i=t.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=t[1],i=t[0]):(r=t[0],i=t[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function v(e,t){return t[+(t.left!==e.site)]}function d(e,t){return t[+(t.left===e.site)]}r.prototype={constructor:r,insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=u(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(f(this,n),n=(e=n).U),n.C=!1,r.C=!0,s(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(s(this,n),n=(e=n).U),n.C=!1,r.C=!0,f(this,r)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,l=e.L,a=e.R;if(n=l?a?u(a):l:a,i?i.L===e?i.L=n:i.R=n:this._=n,l&&a?(r=n.C,n.C=e.C,n.L=l,l.U=n,n!==a?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=a,a.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===i.L){if((t=i.R).C&&(t.C=!1,i.C=!0,f(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,s(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,f(this,i),e=this._;break}}else if((t=i.L).C&&(t.C=!1,i.C=!0,s(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,f(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,s(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}};var C,L=[];function p(){i(this),this.x=this.y=this.arc=this.site=this.cy=null}function R(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,f=n.site;if(r!==f){var s=i[0],u=i[1],l=r[0]-s,a=r[1]-u,o=f[0]-s,h=f[1]-u,c=2*(l*h-a*o);if(!(c>=-z)){var g=l*l+a*a,v=o*o+h*h,d=(h*g-a*v)/c,R=(l*v-o*g)/c,b=L.pop()||new p;b.arc=e,b.site=i,b.x=d+s,b.y=(b.cy=R+u)+Math.sqrt(d*d+R*R),e.circle=b;for(var y=null,U=A._;U;)if(b.y<U.y||b.y===U.y&&b.x<=U.x){if(!U.L){y=U.P;break}U=U.L}else{if(!U.R){y=U;break}U=U.R}A.insert(y,b),y||(C=b)}}}}function b(e){var t=e.circle;t&&(t.P||(C=t.N),A.remove(t),L.push(t),i(t),e.circle=null)}var y=[];function U(){i(this),this.edge=this.site=this.circle=null}function M(e){var t=y.pop()||new U;return t.site=e,t}function x(e){b(e),w.remove(e),y.push(e),i(e)}function N(e){var t=e.circle,n=t.x,r=t.cy,i=[n,r],f=e.P,s=e.N,u=[e];x(e);for(var a=f;a.circle&&Math.abs(n-a.circle.x)<E&&Math.abs(r-a.circle.cy)<E;)f=a.P,u.unshift(a),x(a),a=f;u.unshift(a),b(a);for(var h=s;h.circle&&Math.abs(n-h.circle.x)<E&&Math.abs(r-h.circle.cy)<E;)s=h.N,u.push(h),x(h),h=s;u.push(h),b(h);var c,g=u.length;for(c=1;c<g;++c)h=u[c],a=u[c-1],o(h.edge,a.site,h.site,i);a=u[0],(h=u[g-1]).edge=l(a.site,h.site,null,i),R(a),R(h)}function P(e){for(var t,n,r,i,f=e[0],s=e[1],u=w._;u;)if((r=_(u,s)-f)>E)u=u.L;else{if(!((i=f-k(u,s))>E)){r>-E?(t=u.P,n=u):i>-E?(t=u,n=u.N):t=n=u;break}if(!u.R){t=u;break}u=u.R}!function(e){m[e.index]={site:e,halfedges:[]}}(e);var a=M(e);if(w.insert(t,a),t||n){if(t===n)return b(t),n=M(t.site),w.insert(a,n),a.edge=n.edge=l(t.site,a.site),R(t),void R(n);if(n){b(t),b(n);var h=t.site,c=h[0],g=h[1],v=e[0]-c,d=e[1]-g,C=n.site,L=C[0]-c,p=C[1]-g,y=2*(v*p-d*L),U=v*v+d*d,x=L*L+p*p,N=[(p*U-d*x)/y+c,(v*x-L*U)/y+g];o(n.edge,h,C,N),a.edge=l(h,e,null,N),n.edge=l(e,C,null,N),R(t),R(n)}else a.edge=l(t.site,a.site)}}function _(e,t){var n=e.site,r=n[0],i=n[1],f=i-t;if(!f)return r;var s=e.P;if(!s)return-1/0;var u=(n=s.site)[0],l=n[1],a=l-t;if(!a)return u;var o=u-r,h=1/f-1/a,c=o/a;return h?(-c+Math.sqrt(c*c-2*h*(o*o/(-2*a)-l+a/2+i-f/2)))/h+r:(r+u)/2}function k(e,t){var n=e.N;if(n)return _(n,t);var r=e.site;return r[1]===t?r[0]:1/0}var w,m,A,q,E=1e-6,z=1e-12;function j(e,t){return t[1]-e[1]||t[0]-e[0]}function B(e,t){var n,i,f,s=e.sort(j).pop();for(q=[],m=new Array(e.length),w=new r,A=new r;;)if(f=C,s&&(!f||s[1]<f.y||s[1]===f.y&&s[0]<f.x))s[0]===n&&s[1]===i||(P(s),n=s[0],i=s[1]),s=e.pop();else{if(!f)break;N(f.arc)}if(function(){for(var e,t,n,r,i=0,f=m.length;i<f;++i)if((e=m[i])&&(r=(t=e.halfedges).length)){var s=new Array(r),u=new Array(r);for(n=0;n<r;++n)s[n]=n,u[n]=g(e,q[t[n]]);for(s.sort((function(e,t){return u[t]-u[e]})),n=0;n<r;++n)u[n]=t[s[n]];for(n=0;n<r;++n)t[n]=u[n]}}(),t){var u=+t[0][0],l=+t[0][1],o=+t[1][0],L=+t[1][1];!function(e,t,n,r){for(var i,f=q.length;f--;)c(i=q[f],e,t,n,r)&&h(i,e,t,n,r)&&(Math.abs(i[0][0]-i[1][0])>E||Math.abs(i[0][1]-i[1][1])>E)||delete q[f]}(u,l,o,L),function(e,t,n,r){var i,f,s,u,l,o,h,c,g,C,L,p,R=m.length,b=!0;for(i=0;i<R;++i)if(f=m[i]){for(s=f.site,u=(l=f.halfedges).length;u--;)q[l[u]]||l.splice(u,1);for(u=0,o=l.length;u<o;)L=(C=d(f,q[l[u]]))[0],p=C[1],c=(h=v(f,q[l[++u%o]]))[0],g=h[1],(Math.abs(L-c)>E||Math.abs(p-g)>E)&&(l.splice(u,0,q.push(a(s,C,Math.abs(L-e)<E&&r-p>E?[e,Math.abs(c-e)<E?g:r]:Math.abs(p-r)<E&&n-L>E?[Math.abs(g-r)<E?c:n,r]:Math.abs(L-n)<E&&p-t>E?[n,Math.abs(c-n)<E?g:t]:Math.abs(p-t)<E&&L-e>E?[Math.abs(g-t)<E?c:e,t]:null))-1),++o);o&&(b=!1)}if(b){var y,U,M,x=1/0;for(i=0,b=null;i<R;++i)(f=m[i])&&(M=(y=(s=f.site)[0]-e)*y+(U=s[1]-t)*U)<x&&(x=M,b=f);if(b){var N=[e,t],P=[e,r],_=[n,r],k=[n,t];b.halfedges.push(q.push(a(s=b.site,N,P))-1,q.push(a(s,P,_))-1,q.push(a(s,_,k))-1,q.push(a(s,k,N))-1)}}for(i=0;i<R;++i)(f=m[i])&&(f.halfedges.length||delete m[i])}(u,l,o,L)}this.edges=q,this.cells=m,w=A=q=m=null}function D(){var r=t,i=n,f=null;function s(e){return new B(e.map((function(t,n){var f=[Math.round(r(t,n,e)/E)*E,Math.round(i(t,n,e)/E)*E];return f.index=n,f.data=t,f})),f)}return s.polygons=function(e){return s(e).polygons()},s.links=function(e){return s(e).links()},s.triangles=function(e){return s(e).triangles()},s.x=function(t){return arguments.length?(r="function"==typeof t?t:e(+t),s):r},s.y=function(t){return arguments.length?(i="function"==typeof t?t:e(+t),s):i},s.extent=function(e){return arguments.length?(f=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],s):f&&[[f[0][0],f[0][1]],[f[1][0],f[1][1]]]},s.size=function(e){return arguments.length?(f=null==e?null:[[0,0],[+e[0],+e[1]]],s):f&&[f[1][0]-f[0][0],f[1][1]-f[0][1]]},s}B.prototype={constructor:B,polygons:function(){var e=this.edges;return this.cells.map((function(t){var n=t.halfedges.map((function(n){return v(t,e[n])}));return n.data=t.site.data,n}))},triangles:function(){var e=[],t=this.edges;return this.cells.forEach((function(n,r){if(f=(i=n.halfedges).length)for(var i,f,s,u,l,a,o=n.site,h=-1,c=t[i[f-1]],g=c.left===o?c.right:c.left;++h<f;)s=g,g=(c=t[i[h]]).left===o?c.right:c.left,s&&g&&r<s.index&&r<g.index&&(l=s,a=g,((u=o)[0]-a[0])*(l[1]-u[1])-(u[0]-l[0])*(a[1]-u[1])<0)&&e.push([o.data,s.data,g.data])})),e},links:function(){return this.edges.filter((function(e){return e.right})).map((function(e){return{source:e.left.data,target:e.right.data}}))},find:function(e,t,n){for(var r,i,f=this,s=f._found||0,u=f.cells.length;!(i=f.cells[s]);)if(++s>=u)return null;var l=e-i.site[0],a=t-i.site[1],o=l*l+a*a;do{i=f.cells[r=s],s=null,i.halfedges.forEach((function(n){var r=f.edges[n],u=r.left;if(u!==i.site&&u||(u=r.right)){var l=e-u[0],a=t-u[1],h=l*l+a*a;h<o&&(o=h,s=u.index)}}))}while(null!==s);return f._found=r,null==n||o<=n*n?i.site:null}};export{D as voronoi};export default null;
