<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="generator" content="Observable Framework v1.11.0">
<title>Blend Mixer | Portfolio</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Source+Serif+4:ital,opsz,wght@0,8..60,200..900;1,8..60,200..900&amp;display=swap" crossorigin>
<link rel="preload" as="style" href="./_import/custom-style.95d164d2.css">
<link rel="preload" as="style" href="./_observablehq/stdlib/inputs.ea9fd553.css">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css2?family=Source+Serif+4:ital,opsz,wght@0,8..60,200..900;1,8..60,200..900&amp;display=swap" crossorigin>
<link rel="stylesheet" type="text/css" href="./_import/custom-style.95d164d2.css">
<link rel="stylesheet" type="text/css" href="./_observablehq/stdlib/inputs.ea9fd553.css">
<link rel="modulepreload" href="./_observablehq/client.f5ee32d5.js">
<link rel="modulepreload" href="./_observablehq/runtime.3f7f73d9.js">
<link rel="modulepreload" href="./_observablehq/stdlib.2229c972.js">
<link rel="modulepreload" href="./_npm/textures@1.2.3/94aedbe4.js">
<link rel="modulepreload" href="./_npm/d3@7.9.0/7055d4c5.js">
<link rel="modulepreload" href="./_observablehq/stdlib/inputs.e0c0bc10.js">
<link rel="modulepreload" href="./_npm/htl@0.3.1/063eb405.js">
<link rel="modulepreload" href="./_npm/isoformat@0.2.1/c68fbd73.js">
<link rel="modulepreload" href="./_npm/d3-array@3.2.4/e95f898e.js">
<link rel="modulepreload" href="./_npm/d3-axis@3.0.0/d44feff9.js">
<link rel="modulepreload" href="./_npm/d3-brush@3.0.0/5830b12a.js">
<link rel="modulepreload" href="./_npm/d3-chord@3.0.1/84d7b8e9.js">
<link rel="modulepreload" href="./_npm/d3-color@3.1.0/2c0cdfa2.js">
<link rel="modulepreload" href="./_npm/d3-contour@4.0.2/626bedc4.js">
<link rel="modulepreload" href="./_npm/d3-delaunay@6.0.4/00c41b5d.js">
<link rel="modulepreload" href="./_npm/d3-dispatch@3.0.1/b5f7cdc6.js">
<link rel="modulepreload" href="./_npm/d3-drag@3.0.0/b22c5864.js">
<link rel="modulepreload" href="./_npm/d3-dsv@3.0.1/407f7a1f.js">
<link rel="modulepreload" href="./_npm/d3-ease@3.0.1/6f15f633.js">
<link rel="modulepreload" href="./_npm/d3-fetch@3.0.1/ef1ec490.js">
<link rel="modulepreload" href="./_npm/d3-force@3.0.0/5e1ff060.js">
<link rel="modulepreload" href="./_npm/d3-format@3.1.0/5851d7ef.js">
<link rel="modulepreload" href="./_npm/d3-geo@3.1.1/dcd02767.js">
<link rel="modulepreload" href="./_npm/d3-hierarchy@3.1.2/f1db2593.js">
<link rel="modulepreload" href="./_npm/d3-interpolate@3.0.1/034b7bcb.js">
<link rel="modulepreload" href="./_npm/d3-path@3.1.0/4bb53638.js">
<link rel="modulepreload" href="./_npm/d3-polygon@3.0.1/bbafde58.js">
<link rel="modulepreload" href="./_npm/d3-quadtree@3.0.1/aa5b35a8.js">
<link rel="modulepreload" href="./_npm/d3-random@3.0.1/32c7fec2.js">
<link rel="modulepreload" href="./_npm/d3-scale@4.0.2/567840a0.js">
<link rel="modulepreload" href="./_npm/d3-scale-chromatic@3.1.0/cf9b720b.js">
<link rel="modulepreload" href="./_npm/d3-selection@3.0.0/5dcd62f4.js">
<link rel="modulepreload" href="./_npm/d3-shape@3.2.0/f8e03c56.js">
<link rel="modulepreload" href="./_npm/d3-time@3.1.0/5bc129e1.js">
<link rel="modulepreload" href="./_npm/d3-time-format@4.1.0/19c92b44.js">
<link rel="modulepreload" href="./_npm/d3-timer@3.0.1/f31b5398.js">
<link rel="modulepreload" href="./_npm/d3-transition@3.0.1/8debb4ba.js">
<link rel="modulepreload" href="./_npm/d3-zoom@3.0.0/4b0cc581.js">
<link rel="modulepreload" href="./_npm/internmap@2.0.3/5eed35fd.js">
<link rel="modulepreload" href="./_npm/delaunator@5.0.1/e67acb27.js">
<link rel="modulepreload" href="./_npm/robust-predicates@3.0.2/8ac9039b.js">
<link rel="icon" href="./_file/observable.1af93621.png" type="image/png" sizes="32x32">
<script type="module">

import {define} from "./_observablehq/client.f5ee32d5.js";

define({id: "d57e3bf2", inputs: ["Inputs","display","d3"], outputs: ["textures","generateCombinations","blendModes","topColor","bottomColor","baseColor","gradient","invert","texColor","texToggle","texType","texPaths","texOrientation","texFractions","texStrokeWeight","texStrokeWeightInput","texLineWidth","texLineWidthInput","texSize","texStrokeWidth","texCircleRadius","texFilters","texBlendMode","updateTexture","CustomIcon","updateColors","swatch","icon"], body: async (Inputs,display,d3) => {
const textures = await import("./_npm/textures@1.2.3/94aedbe4.js");

function generateCombinations() {
    const blendModes = [
      'multiply', 'screen', 'overlay',
      'darken', 'lighten', 'color-dodge', 'color-burn',
      'hard-light', 'soft-light', 'difference', 'exclusion',
      'hue', 'saturation', 'color', 'luminosity'
    ];

    const combinations = [];
    
    for (let i = 0; i < blendModes.length; i++) {
        for (let j = 0; j < blendModes.length; j++) {
            combinations.push(`${blendModes[i]}_${blendModes[j]}`);
        }
    }
    
    return combinations;
}

const blendModes = generateCombinations

let topColor = Inputs.color({
  label: "Top color", 
  value: "#00ff00"
})

let bottomColor = Inputs.color({
  label: "Bottom color", 
  value: "#ff0000"
})

let baseColor = Inputs.color({
  label: "Base color", 
  value: "#EEEEEE"
})

const gradient = Inputs.radio(['off','radial','linear'],{label:"gradient"});

const invert = Inputs.toggle({label: "invert", values: [1,0]})

//const tex = Inputs.text({label: "textures", placeholder: `textures.lines().orientation("3/8", "7/8").stroke("DarkGreen")`, submit: true, width:"600px"})
const texColor = Inputs.radio(['black','top','bottom','base'],{label:"Texture Color"})
const texToggle = Inputs.toggle({label: "on/off", values: [1,0]})
const texType = Inputs.radio(['lines','circles','paths'],{label:"Texture Type"})

const texPaths = Inputs.select(['hexagons','crosses','caps','woven','waves','nylon','squares'], {label: "Pattern"})

const texOrientation = Inputs.checkbox([null,'vertical','horizontal','diagonal'])
const texFractions = Inputs.checkbox(['1/8','3/8','5/8','7/8'])
const texStrokeWeight = Inputs.radio([null,'heavier','lighter'],{label:"Stroke Weight"})
const texStrokeWeightInput = Inputs.number([0, 5], {step: 0.1, label: "weight", placeholder: ""})
const texLineWidth = Inputs.radio([null,'thicker','thinner'],{label:"Line Width"}) //predefined utility?
const texLineWidthInput = Inputs.number([0, 5], {step: 0.1, label: "width", placeholder: ""})
const texSize = Inputs.number([0, 50], {step: 1, label: "size", placeholder: ""})
const texStrokeWidth = Inputs.number([0, 50], {step: 1, label: "stroke width", placeholder: ""})
const texCircleRadius = Inputs.number([0, 8], {step: 0.5, label: "radius", placeholder: ""})

const texFilters = {
  blur: Inputs.number([0, 8], {step: 0.1, label: "blur", placeholder: "px"}),
  brightness: Inputs.number([0, 200], {step: 10, label: "brightness", placeholder: "%"}),
  contrast: Inputs.number([0, 200], {step: 10, label: "contrast", placeholder: "%"}),
  // Add other filter inputs as needed
}

const texBlendMode = Inputs.select(
  ['normal', 'multiply', 'screen', 'overlay', 'darken', 'lighten', 
   'color-dodge', 'color-burn', 'hard-light', 'soft-light', 
   'difference', 'exclusion', 'hue', 'saturation', 'color', 'luminosity'], 
  {label: "Texture Blend Mode"}
)


/**
 * lines   lines
 * heavier size
 *         stroke
 * lighter strokeWidth
 * thicker orientation(fraction, veritcal, horizontal diagonal)
 * thinner shapeRendering
 * 
*/

/**
 * circles    circles
 * heavier    size
 * lighter    radius
 * thicker    fill
 * thinner    strokeWidth
 * complement stroke
 *            background
*/

/**
 * paths
 * hexagons
 * crosses
 * caps
 * woven
 * waves
 * nylon
 * squares
*/

function updateTexture() {
  
let texture = textures.default[texType.value]();
    if (texToggle.value === 1 ) {
         
      if (texType.value == 'circles'){
        if (texCircleRadius.value > 0) {
            texture.radius(texCircleRadius.value);
        }
      }

      if (texType.value == 'paths'){
        texture.d(texPaths.value);  // Chain .d() to existing instance)
      } 

      let orientations = [];
    
    // Collect standard orientations if any
    if (texOrientation.value.length > 0) {
        orientations.push(...texOrientation.value);
    }
    
    // Add fraction orientations if any
    if (texFractions.value.length > 0) {
        orientations.push(...texFractions.value);
    }
    
    // Apply all orientations if we have any
    if (orientations.length > 0) {
        texture.orientation(...orientations);
    }

    if (texStrokeWeight.value !== null) {
        texture[texStrokeWeight.value]()
        if (texStrokeWeightInput.value > 0){
          texture[texStrokeWeight.value](texStrokeWeightInput.value)
        }
    }

    if (texLineWidth.value !== null) {
       texture[texLineWidth.value]()
       if (texLineWidthInput.value > 0){
          texture[texLineWidth.value](texLineWidthInput.value)
        }
    }

    if (texSize.value > 0) {
        texture.size(texSize.value);
    }

    if (texColor.value){

      let color = 'black'

      if (texColor.value == 'top'){
        color = topColor.value
      }

      if (texColor.value == 'bottom'){
        color = bottomColor.value
      }

      if (texColor.value == 'base'){
        color = baseColor.value
      }

      texture.stroke(color)
 
    } 

  

        return texture;
    
    
    }
}


display(topColor)
display(bottomColor)
display(baseColor)
display(gradient)
display(invert)



//display(tex)

class CustomIcon {
  constructor(
    props = {
    }
  ) {
    this.size = props.size ? props.size : 120;
    this.texture = props.texture ? props.texture : { show: false };
    this.symbol = props.symbol ? props.symbol : null;
  }

  get render() {
    let uid = Math.random().toString(36).substr(2, 5);
    let label = this.label;
    let texture = this.texture;
    let size = this.size;
    let customSize = this.customSize

    let symbol = this.symbol;
    let svg;
    let dy = 0;

    var stringToHTML = function (str) {
      var dom = document.createElementNS("http://www.w3.org/2000/svg", "svg");
      dom.innerHTML = str;
      return dom;
    };

    symbol = d3.select(stringToHTML(symbol)).attr("id", `symbol-${uid}`);

    svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    svg.setAttribute("width", size);
    svg.setAttribute("height", size);

    let g = d3
    .select(svg)
    .style("box-sizing", "content-box")
    //.style("border", `${borderWidth} ${borderStyle} ${borderColor}`)
    .attr("id", uid);
    
    g.append("svg")
      .attr("class", `target-${uid}`)
      .attr("width", customSize)
      .attr("height", size)
      .attr("viewBox", `0 0 ${size} ${size}`)
      .html(symbol.node().outerHTML);

    // Initial color setup
    updateColors(topColor.value, bottomColor.value, baseColor.value);
    return g.node()
  }

}

function updateColors(topColor, bottomColor, baseColor) {
    document.querySelectorAll("#bottomColor > rect")
        .forEach(rect => rect.style.fill = bottomColor);
    
    document.querySelectorAll("#topColor > rect")
        .forEach(rect => rect.style.fill = topColor);

    document.querySelectorAll("#baseColor > rect")
        .forEach(rect => rect.style.fill = baseColor);
}

  topColor.addEventListener('input', () => {
    updateColors(topColor.value, bottomColor.value, baseColor.value);
  });

  bottomColor.addEventListener('input', () => {
    updateColors(topColor.value, bottomColor.value, baseColor.value);
  });

  baseColor.addEventListener('input', () => {
    updateColors(topColor.value, bottomColor.value, baseColor.value);
  });

  gradient.addEventListener('input', () => {
    if (gradient.value == 'radial'){
      document.querySelectorAll("#radial").forEach(element => {
          element.setAttribute("display", "inherit !important");
      });
      document.querySelectorAll("#linear").forEach(element => {
          element.setAttribute("display", "none");
      });
    }
    else if (gradient.value == 'linear'){
      document.querySelectorAll("#linear").forEach(element => {
          element.setAttribute("display", "inherit !important");
      });
      document.querySelectorAll("#radial").forEach(element => {
          element.setAttribute("display", "none");
      });
    } else {
      document.querySelectorAll("#linear").forEach(element => {
          element.setAttribute("display", "none");
      });
      document.querySelectorAll("#radial").forEach(element => {
          element.setAttribute("display", "none");
      });
  
    }
  })

  invert.addEventListener('input', (e) => {
  document.querySelectorAll("#gradients").forEach((elm) => {
      elm.style.filter = `invert(${invert.value ? 1 : 0})`
  })
})

/*
tex.addEventListener('input', (e) => {
    const textureValue = textures.lines()
        .orientation("3/8", "7/8")
        .stroke("DarkGreen");
        
    d3.selectAll("#texture").each(function() {
        const selection = d3.select(this);
        selection.call(textureValue);
        selection.style("fill", textureValue.url());
    });
});
*/

let swatch = `<?xml version="1.0" encoding="UTF-8"?>
<svg id="card" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100">
  <defs>
    <style>
      .cls-1 {
        fill: none;
      }

      .cls-2 {
        fill: url(#radial-gradient);
      }

      .cls-3 {
        fill: url(#linear-gradient);
      }
    </style>
    <radialGradient id="radial-gradient" cx="50" cy="50" fx="50" fy="50" r="50" gradientUnits="userSpaceOnUse">
      <stop offset="0" stop-color="#fff"/>
      <stop offset="1" stop-color="#000"/>
    </radialGradient>
    <linearGradient id="linear-gradient" x1="0" y1="50" x2="100" y2="50" gradientUnits="userSpaceOnUse">
      <stop offset="0" stop-color="#fff"/>
      <stop offset="1" stop-color="#000"/>
    </linearGradient>
  </defs>
   <g id="baseColor">
    <rect class="cls-1" width="100" height="100"/>
  </g>
  <g id="bottomColor">
    <rect class="cls-1" width="100" height="100"/>
  </g>
  <g id="topColor">
    <rect class="cls-1" width="100" height="100"/>
  </g>
  <g id="texture">
    <rect class="cls-1" width="100" height="100"/>
  </g>
  <g id="gradients">
    <rect id="radial" class="cls-2" style="display:none" width="100" height="100"/>
    <rect id="linear" class="cls-3" style="display:none" width="100" height="100"/>
  </g>
</svg>
`

let icon = new CustomIcon({
  symbol: swatch,
})

return {textures,generateCombinations,blendModes,topColor,bottomColor,baseColor,gradient,invert,texColor,texToggle,texType,texPaths,texOrientation,texFractions,texStrokeWeight,texStrokeWeightInput,texLineWidth,texLineWidthInput,texSize,texStrokeWidth,texCircleRadius,texFilters,texBlendMode,updateTexture,CustomIcon,updateColors,swatch,icon};
}});

define({id: "5fac8e65", inputs: ["display","texToggle","texType","texPaths","texOrientation","texFractions","texStrokeWeight","texStrokeWeightInput","texLineWidth","texLineWidthInput","texSize","texStrokeWidth","texCircleRadius","texColor","texFilters","texBlendMode"], body: (display,texToggle,texType,texPaths,texOrientation,texFractions,texStrokeWeight,texStrokeWeightInput,texLineWidth,texLineWidthInput,texSize,texStrokeWidth,texCircleRadius,texColor,texFilters,texBlendMode) => {
display(texToggle)
display(texType)
display(texPaths)
display(texOrientation)
display(texFractions)
display(texStrokeWeight)
display(texStrokeWeightInput)
display(texLineWidth)
display(texLineWidthInput)
display(texSize)
display(texStrokeWidth)
display(texCircleRadius)
display(texColor)
display(texFilters.blur)
display(texBlendMode)

}});

define({id: "d8e80062", inputs: ["texToggle","texType","texOrientation","texFractions","texStrokeWeight","texStrokeWeightInput","texLineWidth","texLineWidthInput","texSize","texStrokeWidth","texCircleRadius","texPaths","texColor","texBlendMode","updateTexture","d3","texFilters","display","blendModes","icon"], body: (texToggle,texType,texOrientation,texFractions,texStrokeWeight,texStrokeWeightInput,texLineWidth,texLineWidthInput,texSize,texStrokeWidth,texCircleRadius,texPaths,texColor,texBlendMode,updateTexture,d3,texFilters,display,blendModes,icon) => {
[texToggle, texType, texOrientation, texFractions, texStrokeWeight, 
 texStrokeWeightInput, texLineWidth, texLineWidthInput, texSize, 
 texStrokeWidth, texCircleRadius, texPaths, texColor, texBlendMode].forEach(input => {
    input.addEventListener('input', (e) => {
        const newTexture = updateTexture();
        // Apply the texture where needed, e.g.:
        d3.select('#testTexture').call(newTexture)
        d3.select('.testTexture').style('fill', newTexture.url);
        d3.selectAll('#texture rect').style('fill', newTexture.url).style('mix-blend-mode', texBlendMode.value);
    });
})

texFilters.blur.addEventListener('input', () => {
  const filters = [];
  if (texFilters.blur.value > 0) filters.push(`blur(${texFilters.blur.value}px)`);
  if (texFilters.brightness.value > 0) filters.push(`brightness(${texFilters.brightness.value}%)`);
  if (texFilters.contrast.value > 0) filters.push(`contrast(${texFilters.contrast.value}%)`);
  
  const filterString = filters.join(' ');
  d3.selectAll('#texture rect').style('filter', filterString);
  d3.select('.testTexture').style('filter', filterString);
});

//tops
display(blendModes())
blendModes().forEach(mode => display(d3.select(icon.render).classed("fx-"+mode, true).node()));

//bottoms
}});

</script>
<input id="observablehq-sidebar-toggle" type="checkbox" title="Toggle sidebar">
<label id="observablehq-sidebar-backdrop" for="observablehq-sidebar-toggle"></label>
<nav id="observablehq-sidebar">
  <ol>
    <label id="observablehq-sidebar-close" for="observablehq-sidebar-toggle"></label>
    <li class="observablehq-link"><a href="./">Portfolio</a></li>
  </ol>
  <section>
    <summary>Examples</summary>
    <ol>
    <li class="observablehq-link"><a href="./make-a-map">🗺️ Make A Map (Mapa)</a></li>
    </ol>
  </section>
</nav>
<script>{Object.assign(document.createElement("a"),{href:""}).password&&location.replace(location.href);const e=document.querySelector("#observablehq-sidebar"),t=document.querySelector("#observablehq-sidebar-toggle"),r=sessionStorage.getItem("observablehq-sidebar");r?t.checked=r==="true":t.indeterminate=!0;for(const o of document.querySelectorAll("#observablehq-sidebar summary")){const s=o.parentElement;switch(sessionStorage.getItem(`observablehq-sidebar:${o.textContent}`)){case"true":s.open=!0;break;case"false":s.classList.contains("observablehq-section-active")||(s.open=!1);break}}addEventListener("beforeunload",()=>sessionStorage.setItem("observablehq-sidebar-scrolly",`${e.scrollTop}`));const a=sessionStorage.getItem("observablehq-sidebar-scrolly");a!=null&&(e.style.cssText="overflow: hidden;",e.scrollTop=+a,e.style.cssText="");}</script>
<div id="observablehq-center">
<main id="observablehq-main" class="observablehq">
<h1 id="blend-mixer" tabindex="-1"><a class="observablehq-header-anchor" href="#blend-mixer">Blend Mixer</a></h1>
<div class="observablehq observablehq--block"><!--:d57e3bf2:--></div>
<details open="">
  <summary>Texture</summary>
<div class="observablehq observablehq--block"><!--:5fac8e65:--></div>
<svg id="testTexture" width="100" height="100">
  <rect class="testTexture" width="100" height="100"></rect>
</svg>
</details>
<div class="observablehq observablehq--block"><!--:d8e80062:--></div>
<style>

#gradients{
  mix-blend-mode:multiply 
}

[class^="fx-multiply"] #topColor rect {
  mix-blend-mode:multiply 
}

[class$="_multiply"] #bottomColor rect {
  mix-blend-mode:multiply 
}

[class^="fx-screen"] #topColor rect {
  mix-blend-mode:screen 
}

[class$="_screen"] #bottomColor rect {
  mix-blend-mode:screen 
}
[class^="fx-overlay"] #topColor rect {
  mix-blend-mode:overlay 
}

[class$="_overlay"] #bottomColor rect {
  mix-blend-mode:overlay 
}
[class^="fx-darken"] #topColor rect {
  mix-blend-mode:darken 
}

[class$="_darken"] #bottomColor rect {
  mix-blend-mode:darken 
}
[class^="fx-lighten"] #topColor rect {
  mix-blend-mode:lighten 
}

[class$="_lighten"] #bottomColor rect {
  mix-blend-mode:lighten 
}
[class^="fx-color-dodge"] #topColor rect {
  mix-blend-mode:color-dodge 
}

[class$="_color-dodge"] #bottomColor rect {
  mix-blend-mode:color-dodge 
}
[class^="fx-hard-light"] #topColor rect {
  mix-blend-mode:hard-light 
}

[class$="_hard-light"] #bottomColor rect {
  mix-blend-mode:hard-light 
}
[class^="fx-soft-light"] #topColor rect {
  mix-blend-mode:soft-light 
}

[class$="_soft-light"] #bottomColor rect {
  mix-blend-mode:soft-light 
}
[class^="fx-difference"] #topColor rect {
  mix-blend-mode:difference 
}

[class$="_difference"] #bottomColor rect {
  mix-blend-mode:difference 
}
[class^="fx-exclusion"] #topColor rect {
  mix-blend-mode:exclusion 
}

[class$="_exclusion"] #bottomColor rect {
  mix-blend-mode:exclusion 
}
[class^="fx-hue"] #topColor rect {
  mix-blend-mode:hue 
}

[class$="_hue"] #bottomColor rect {
  mix-blend-mode:hue 
}
[class^="fx-saturation"] #topColor rect {
  mix-blend-mode:saturation 
}

[class$="_saturation"] #bottomColor rect {
  mix-blend-mode:saturation 
}
[class^="fx-color"] #topColor rect {
  mix-blend-mode:color 
}

[class$="_color"] #bottomColor rect {
  mix-blend-mode:color 
}

[class^="fx-luminosity"] #topColor rect {
  mix-blend-mode:luminosity 
}

[class$="_luminosity"] #bottomColor rect {
  mix-blend-mode:luminosity 
}



</style>
</main>
<footer id="observablehq-footer">
<div>Built with <a href="https://observablehq.com/" target="_blank" rel="noopener noreferrer">Observable</a> on <a title="2025-01-22T06:32:34">Jan 22, 2025</a>.</div>
</footer>
</div>
