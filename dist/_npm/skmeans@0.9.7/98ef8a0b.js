/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/skmeans@0.9.7/dist/node/main.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var r={eudist:function(r,a,t){for(var n=r.length,o=0,f=0;f<n;f++){var e=(r[f]||0)-(a[f]||0);o+=e*e}return t?Math.sqrt(o):o},mandist:function(r,a,t){for(var n=r.length,o=0,f=0;f<n;f++)o+=Math.abs((r[f]||0)-(a[f]||0));return t?Math.sqrt(o):o},dist:function(r,a,t){var n=Math.abs(r-a);return t?n:n*n}},a=r.eudist,t=r.dist,n={kmrand:function(r,a){for(var t={},n=[],o=a<<2,f=r.length,e=r[0].length>0;n.length<a&&o-- >0;){var v=r[Math.floor(Math.random()*f)],h=e?v.join("_"):""+v;t[h]||(t[h]=!0,n.push(v))}if(n.length<a)throw new Error("Error initializating clusters");return n},kmpp:function(r,n){var o=r[0].length?a:t,f=[],e=r.length,v=r[0].length>0,h=r[Math.floor(Math.random()*e)];for(v&&h.join("_"),f.push(h);f.length<n;){for(var i=[],s=f.length,u=0,l=[],d=0;d<e;d++){for(var p=1/0,c=0;c<s;c++){var g=o(r[d],f[c]);g<=p&&(p=g)}i[d]=p}for(var M=0;M<e;M++)u+=i[M];for(var m=0;m<e;m++)l[m]={i:m,v:r[m],pr:i[m]/u,cs:0};l.sort((function(r,a){return r.pr-a.pr})),l[0].cs=l[0].pr;for(var k=1;k<e;k++)l[k].cs=l[k-1].cs+l[k].pr;for(var b=Math.random(),w=0;w<e-1&&l[w++].cs<b;);f.push(l[w-1].v)}return f}},o=r.eudist,f=n.kmrand,e=n.kmpp;function v(r,a,t){t=t||[];for(var n=0;n<r;n++)t[n]=a;return t}var h=function(r,a,t,n){var h=[],i=[],s=[],u=[],l=!1,d=n||1e4,p=r.length,c=r[0].length,g=c>0,M=[];if(t)h="kmrand"==t?f(r,a):"kmpp"==t?e(r,a):t;else for(var m={};h.length<a;){var k=Math.floor(Math.random()*p);m[k]||(m[k]=!0,h.push(r[k]))}do{v(a,0,M);for(var b=0;b<p;b++){for(var w=1/0,j=0,q=0;q<a;q++){(u=g?o(r[b],h[q]):Math.abs(r[b]-h[q]))<=w&&(w=u,j=q)}s[b]=j,M[j]++}for(var x=[],E=(i=[],0);E<a;E++)x[E]=g?v(c,0,x[E]):0,i[E]=h[E];if(g){for(var _=0;_<a;_++)h[_]=[];for(var z=0;z<p;z++)for(var y=x[s[z]],A=r[z],B=0;B<c;B++)y[B]+=A[B];l=!0;for(var C=0;C<a;C++){for(var D=h[C],F=x[C],G=i[C],H=M[C],I=0;I<c;I++)D[I]=F[I]/H||0;if(l)for(var J=0;J<c;J++)if(G[J]!=D[J]){l=!1;break}}}else{for(var K=0;K<p;K++){x[s[K]]+=r[K]}for(var L=0;L<a;L++)h[L]=x[L]/M[L]||0;l=!0;for(var N=0;N<a;N++)if(i[N]!=h[N]){l=!1;break}}l=l||--d<=0}while(!l);return{it:1e4-d,k:a,idxs:s,centroids:h}};export{h as default};
