/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.37.0.
 * Original file: /npm/query-overpass@1.5.5/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import e from"../osmtogeojson@2.2.12/5cbbb167.js";import t from"../xhr@2.6.0/fb7c3f1a.js";import"../concat-stream@2.0.0/dca7608e.js";function r(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(r){if("default"!==r&&!(r in e)){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}}))})),Object.freeze(e)}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function o(e){return e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function a(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})})),t}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function u(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function p(e,t,r,n){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?f(c(e),(function(n){var o=encodeURIComponent(u(n))+r;return i(e[n])?f(e[n],(function(e){return o+encodeURIComponent(u(e))})).join(t):o+encodeURIComponent(u(e[n]))})).join(t):n?encodeURIComponent(u(n))+r+encodeURIComponent(u(e)):""}function f(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var c=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t};function d(e,t,r,n){t=t||"&",r=r||"=";var o={};if("string"!=typeof e||0===e.length)return o;var a=/\+/g;e=e.split(t);var u=1e3;n&&"number"==typeof n.maxKeys&&(u=n.maxKeys);var p=e.length;u>0&&p>u&&(p=u);for(var f=0;f<p;++f){var c,d,l,y,m=e[f].replace(a,"%20"),b=m.indexOf(r);b>=0?(c=m.substr(0,b),d=m.substr(b+1)):(c=m,d=""),l=decodeURIComponent(c),y=decodeURIComponent(d),s(o,l)?i(o[l])?o[l].push(y):o[l]=[o[l],y]:o[l]=y}return o}var l={encode:p,stringify:p,decode:d,parse:d},y=o(Object.freeze({__proto__:null,stringify:p,parse:d,default:l,encode:p,decode:d})),m={},b=a(r({__proto__:null,default:m},[m])),v=e,g=y,O=t,h=b,j=b,w=function(e,t,r){var o;r=r||{};var a,s=function(e){var n;n=v(e,{flatProperties:r.flatProperties||!1}),t(void 0,n)},i={headers:{"content-type":"application/x-www-form-urlencoded"},body:g.stringify({data:e})};return n.window?a=O.post(r.overpassUrl||"https://overpass-api.de/api/interpreter",i,(function(e,r,n){e||200!==r.statusCode?t(e||(r?{message:"Request failed: HTTP "+r.statusCode,statusCode:r.statusCode}:{message:"Unknown error."})):s(JSON.parse(n))})):(a=O.post(r.overpassUrl||"https://overpass-api.de/api/interpreter",i)).on("response",(function(e){if(200!=e.statusCode)return a.abort(),t({message:"Request failed: HTTP "+e.statusCode,statusCode:e.statusCode});if((o=e.headers["content-type"]).indexOf("json")>=0)a.pipe(h.parse()).on("data",s).on("error",t);else if(o.indexOf("xml")>=0){var r="";a.on("data",(function(e){r+=e})).on("end",(function(){var e,t;e=r,t=(new j.DOMParser).parseFromString(e),s(t)}))}else t({message:'Unknown Content-Type "'+o+'" in response'})})).on("error",t),a};export{w as default};
