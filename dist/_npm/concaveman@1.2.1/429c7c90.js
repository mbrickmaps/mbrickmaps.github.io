/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/concaveman@1.2.1/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import n from"../rbush@3.0.1/d425f52b.js";import r from"../tinyqueue@2.0.3/904e1d39.js";import t from"../point-in-polygon@1.1.0/ad8ad71d.js";import e from"../robust-predicates@2.0.4/umd/orient2d.min.js.3c911427.js";var a={exports:{}},i=n,o=r,m=t,u=e.orient2d;function p(n,r,t){r=Math.max(0,void 0===r?2:r),t=t||0;var e=function(n){for(var r=n[0],t=n[0],e=n[0],a=n[0],i=0;i<n.length;i++){var o=n[i];o[0]<r[0]&&(r=o),o[0]>e[0]&&(e=o),o[1]<t[1]&&(t=o),o[1]>a[1]&&(a=o)}var u=[r,t,e,a],p=u.slice();for(i=0;i<n.length;i++)m(n[i],u)||p.push(n[i]);return function(n){n.sort(M);for(var r=[],t=0;t<n.length;t++){for(;r.length>=2&&s(r[r.length-2],r[r.length-1],n[t])<=0;)r.pop();r.push(n[t])}for(var e=[],a=n.length-1;a>=0;a--){for(;e.length>=2&&s(e[e.length-2],e[e.length-1],n[a])<=0;)e.pop();e.push(n[a])}return e.pop(),r.pop(),r.concat(e)}(p)}(n),a=new i(16);a.toBBox=function(n){return{minX:n[0],minY:n[1],maxX:n[0],maxY:n[1]}},a.compareMinX=function(n,r){return n[0]-r[0]},a.compareMinY=function(n,r){return n[1]-r[1]},a.load(n);for(var o,u=[],p=0;p<e.length;p++){var h=e[p];a.remove(h),o=d(h,o),u.push(o)}var x=new i(16);for(p=0;p<u.length;p++)x.insert(c(u[p]));for(var v=r*r,l=t*t;u.length;){var Y=u.shift(),g=Y.p,w=Y.next.p,b=X(g,w);if(!(b<l)){var y=b/v;(h=f(a,Y.prev.p,g,w,Y.next.next.p,y,x))&&Math.min(X(h,g),X(h,w))<=y&&(u.push(Y),u.push(d(h,Y)),a.remove(h),x.remove(Y),x.insert(c(Y)),x.insert(c(Y.next)))}}Y=o;var B=[];do{B.push(Y.p),Y=Y.next}while(Y!==o);return B.push(Y.p),B}function f(n,r,t,e,a,i,m){for(var u=new o([],h),p=n.data;p;){for(var f=0;f<p.children.length;f++){var v=p.children[f],s=p.leaf?Y(v,t,e):x(t,e,v);s>i||u.push({node:v,dist:s})}for(;u.length&&!u.peek().node.children;){var c=u.pop(),d=c.node,X=Y(d,r,t),g=Y(d,e,a);if(c.dist<X&&c.dist<g&&l(t,d,m)&&l(e,d,m))return d}(p=u.pop())&&(p=p.node)}return null}function h(n,r){return n.dist-r.dist}function x(n,r,t){if(v(n,t)||v(r,t))return 0;var e=g(n[0],n[1],r[0],r[1],t.minX,t.minY,t.maxX,t.minY);if(0===e)return 0;var a=g(n[0],n[1],r[0],r[1],t.minX,t.minY,t.minX,t.maxY);if(0===a)return 0;var i=g(n[0],n[1],r[0],r[1],t.maxX,t.minY,t.maxX,t.maxY);if(0===i)return 0;var o=g(n[0],n[1],r[0],r[1],t.minX,t.maxY,t.maxX,t.maxY);return 0===o?0:Math.min(e,a,i,o)}function v(n,r){return n[0]>=r.minX&&n[0]<=r.maxX&&n[1]>=r.minY&&n[1]<=r.maxY}function l(n,r,t){for(var e,a,i,o,m=Math.min(n[0],r[0]),u=Math.min(n[1],r[1]),p=Math.max(n[0],r[0]),f=Math.max(n[1],r[1]),h=t.search({minX:m,minY:u,maxX:p,maxY:f}),x=0;x<h.length;x++)if(e=h[x].p,a=h[x].next.p,i=n,e!==(o=r)&&a!==i&&s(e,a,i)>0!=s(e,a,o)>0&&s(i,o,e)>0!=s(i,o,a)>0)return!1;return!0}function s(n,r,t){return u(n[0],n[1],r[0],r[1],t[0],t[1])}function c(n){var r=n.p,t=n.next.p;return n.minX=Math.min(r[0],t[0]),n.minY=Math.min(r[1],t[1]),n.maxX=Math.max(r[0],t[0]),n.maxY=Math.max(r[1],t[1]),n}function d(n,r){var t={p:n,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return r?(t.next=r.next,t.prev=r,r.next.prev=t,r.next=t):(t.prev=t,t.next=t),t}function X(n,r){var t=n[0]-r[0],e=n[1]-r[1];return t*t+e*e}function Y(n,r,t){var e=r[0],a=r[1],i=t[0]-e,o=t[1]-a;if(0!==i||0!==o){var m=((n[0]-e)*i+(n[1]-a)*o)/(i*i+o*o);m>1?(e=t[0],a=t[1]):m>0&&(e+=i*m,a+=o*m)}return(i=n[0]-e)*i+(o=n[1]-a)*o}function g(n,r,t,e,a,i,o,m){var u,p,f,h,x=t-n,v=e-r,l=o-a,s=m-i,c=n-a,d=r-i,X=x*x+v*v,Y=x*l+v*s,g=l*l+s*s,M=x*c+v*d,w=l*c+s*d,b=X*g-Y*Y,y=b,B=b;0===b?(p=0,y=1,h=w,B=g):(h=X*w-Y*M,(p=Y*w-g*M)<0?(p=0,h=w,B=g):p>y&&(p=y,h=w+Y,B=g)),h<0?(h=0,-M<0?p=0:-M>X?p=y:(p=-M,y=X)):h>B&&(h=B,-M+Y<0?p=0:-M+Y>X?p=y:(p=-M+Y,y=X));var j=(1-(f=0===h?0:h/B))*a+f*o-((1-(u=0===p?0:p/y))*n+u*t),k=(1-f)*i+f*m-((1-u)*r+u*e);return j*j+k*k}function M(n,r){return n[0]===r[0]?n[1]-r[1]:n[0]-r[0]}o.default&&(o=o.default),a.exports=p,a.exports.default=p;var w=a.exports;export{w as default};
