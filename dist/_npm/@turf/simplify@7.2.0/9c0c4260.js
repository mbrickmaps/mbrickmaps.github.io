/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.37.0.
 * Original file: /npm/@turf/simplify@7.2.0/dist/esm/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{cleanCoords as n}from"../clean-coords@7.2.0/50050321.js";import{clone as r}from"../clone@7.2.0/5b9e5666.js";import{geomEach as t}from"../meta@7.2.0/c0f2fe64.js";import{isObject as o}from"../helpers@7.2.0/28807c9c.js";function e(n,r,t){var o=r[0],e=r[1],i=t[0]-o,u=t[1]-e;if(0!==i||0!==u){var a=((n[0]-o)*i+(n[1]-e)*u)/(i*i+u*u);a>1?(o=t[0],e=t[1]):a>0&&(o+=i*a,e+=u*a)}return(i=n[0]-o)*i+(u=n[1]-e)*u}function i(n,r,t,o,u){for(var a,l=o,s=r+1;s<t;s++){var c=e(n[s],n[r],n[t]);c>l&&(a=s,l=c)}l>o&&(a-r>1&&i(n,r,a,o,u),u.push(n[a]),t-a>1&&i(n,a,t,o,u))}function u(n,r){var t=n.length-1,o=[n[0]];return i(n,0,t,r,o),o.push(n[t]),o}function a(n,r,t){if(n.length<=2)return n;var o=void 0!==r?r*r:1;return n=t?n:function(n,r){for(var t,o,e,i,u,a=n[0],l=[a],s=1,c=n.length;s<c;s++)t=n[s],e=a,i=void 0,u=void 0,i=(o=t)[0]-e[0],u=o[1]-e[1],i*i+u*u>r&&(l.push(t),a=t);return a!==t&&l.push(t),l}(n,o),n=u(n,o)}function l(e,i={}){var u,l,c;if(!o(i=null!=i?i:{}))throw new Error("options is invalid");const f=null!=(u=i.tolerance)?u:1,m=null!=(l=i.highQuality)&&l,p=null!=(c=i.mutate)&&c;if(!e)throw new Error("geojson is required");if(f&&f<0)throw new Error("invalid tolerance");return!0!==p&&(e=r(e)),t(e,(function(r){!function(r,t,o){const e=r.type;if("Point"===e||"MultiPoint"===e)return r;if(n(r,{mutate:!0}),"GeometryCollection"!==e)switch(e){case"LineString":r.coordinates=a(r.coordinates,t,o);break;case"MultiLineString":r.coordinates=r.coordinates.map((n=>a(n,t,o)));break;case"Polygon":r.coordinates=s(r.coordinates,t,o);break;case"MultiPolygon":r.coordinates=r.coordinates.map((n=>s(n,t,o)))}}(r,f,m)})),e}function s(n,r,t){return n.map((function(n){if(n.length<4)throw new Error("invalid polygon");let o=r,e=a(n,o,t);for(;!c(e);)o-=.01*o,e=a(n,o,t);return e[e.length-1][0]===e[0][0]&&e[e.length-1][1]===e[0][1]||e.push(e[0]),e}))}function c(n){return!(n.length<3)&&!(3===n.length&&n[2][0]===n[0][0]&&n[2][1]===n[0][1])}var f=l;export{f as default,l as simplify};
