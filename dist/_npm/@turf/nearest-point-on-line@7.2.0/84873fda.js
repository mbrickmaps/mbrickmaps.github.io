/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.37.0.
 * Original file: /npm/@turf/nearest-point-on-line@7.2.0/dist/esm/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{distance as t}from"../distance@7.2.0/379bfd17.js";import{flattenEach as r}from"../meta@7.2.0/c0f2fe64.js";import{point as e,degreesToRadians as o,radiansToDegrees as n}from"../helpers@7.2.0/28807c9c.js";import{getCoord as i,getCoords as a}from"../invariant@7.2.0/671cab78.js";var s=Object.defineProperty,p=Object.defineProperties,c=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(t,r,e)=>r in t?s(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,l=(t,r)=>{for(var e in r||(r={}))f.call(r,e)&&h(t,e,r[e]);if(u)for(var e of u(r))m.call(r,e)&&h(t,e,r[e]);return t},d=(t,r)=>p(t,c(r));function M(o,n,s={}){if(!o||!n)throw new Error("lines and pt are required arguments");const p=i(n);let c=e([1/0,1/0],{dist:1/0,index:-1,multiFeatureIndex:-1,location:-1}),u=0;return r(o,(function(r,o,f){const m=a(r);for(let r=0;r<m.length-1;r++){const o=e(m[r]);o.properties.dist=t(n,o,s);const a=i(o),h=e(m[r+1]);h.properties.dist=t(n,h,s);const M=i(h),w=t(o,h,s);let b,y,O;a[0]===p[0]&&a[1]===p[1]?[b,,y]=[a,void 0,!1]:M[0]===p[0]&&M[1]===p[1]?[b,,y]=[M,void 0,!0]:[b,,y]=v(o.geometry.coordinates,h.geometry.coordinates,i(n)),b&&(O=e(b,{dist:t(n,b,s),multiFeatureIndex:f,location:u+t(o,b,s)})),O&&O.properties.dist<c.properties.dist&&(c=d(l({},O),{properties:d(l({},O.properties),{index:y?r+1:r})})),u+=w}})),c}function w(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2))}function b(t,r){const e=function(t,r){const[e,o,n]=t,[i,a,s]=r;return e*i+o*a+n*s}(t,r)/(w(t)*w(r));return Math.acos(Math.min(Math.max(e,-1),1))}function y(t){const r=o(t[1]),e=o(t[0]);return[Math.cos(r)*Math.cos(e),Math.cos(r)*Math.sin(e),Math.sin(r)]}function O(t){const[r,e,o]=t,i=n(Math.asin(o));return[n(Math.atan2(e,r)),i]}function v(r,e,o){const n=y(r),i=y(e),a=y(o),[s,p,c]=a,[u,f,m]=function(t,r){const[e,o,n]=t,[i,a,s]=r;return[o*s-n*a,n*i-e*s,e*a-o*i]}(n,i),h=f*c-m*p,l=m*s-u*c,d=u*p-f*s,M=d*f-l*m,w=h*m-d*u,v=l*u-h*f,g=1/Math.sqrt(Math.pow(M,2)+Math.pow(w,2)+Math.pow(v,2)),j=[M*g,w*g,v*g],x=[-1*M*g,-1*w*g,-1*v*g],P=b(n,i),q=b(n,j),I=b(i,j),E=b(n,x),F=b(i,x);let D;return D=q<E&&q<F||I<E&&I<F?j:x,b(n,D)>P||b(i,D)>P?t(O(D),O(n))<=t(O(D),O(i))?[O(n),!0,!1]:[O(i),!1,!0]:[O(D),!1,!1]}var g=M;export{g as default,M as nearestPointOnLine};
